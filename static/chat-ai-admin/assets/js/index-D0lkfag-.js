import{b as I,n as R,B as V}from"../../index-CuFzRDH0.js";import{a as u}from"./dayjs-CHX5mXCJ.js";import{b as j}from"./index-njT3lQ6A.js";import{a as F,_ as H}from"./RadioButton-ouyuU7LQ.js";import"./index-NJlqtEGH.js";import{R as O}from"./dayjs-DS70I3cJ.js";import{e as f,B,x as L,M as v,N as x,W as o,k as r,S as _,F as N,$ as U,u as Q,Q as $,Y as k,Z as m,a1 as A,a2 as E}from"./vue-chunks-DkYK5AuX.js";import{_ as q}from"./index-B3CceHui.js";import{S as J,_ as W}from"./index-B9b8kVtF.js";import{_ as Z,a as G}from"./index-CaI5udhb.js";import"./axios-Cm0UX6qg.js";import"./qs-g-qVsYXK.js";import"./crypto-js-CsNcoEfj.js";import"./FormItemContext-CG4o3aCY.js";import"./Checkbox-CHV8yuJS.js";import"./index-DtO8wbUi.js";import"./index-_b6N6Mhe.js";import"./colors-TmzmwKXv.js";import"./CheckOutlined-Nu5wJEo2.js";import"./Trigger-qqJEyN1K.js";import"./ResizeObserver.es-B1PUzC5B.js";import"./shallowequal-CCVEH32S.js";import"./index-DpON8wvi.js";import"./move-CfeIRdjT.js";import"./slide--PTaLm6c.js";import"./index-CNYsll_x.js";import"./DownOutlined-xHwfZhzl.js";import"./SearchOutlined-2-sBVYkv.js";import"./index-D0OvhCrn.js";import"./useMaxLevel-iyEeLMuD.js";import"./collapseMotion-D38MKU2V.js";import"./CaretDownFilled-P6q1_Q4R.js";import"./index-DncdWYWk.js";import"./responsiveObserve-nm9aPAMw.js";import"./css-DbBMd65r.js";import"./fromPairs-Dx9PT-t0.js";import"./index-YK7vZYdC.js";import"./LeftOutlined-BL6rtvtT.js";import"./RightOutlined-C7Gymx4e.js";import"./index-DVObnatt.js";import"./index-CvnBYLiG.js";import"./index-DmWi8Hkf.js";import"./dropdown-aM3tBgR4.js";import"./Dropdown-DNhcw7uk.js";import"./index-D2p2Kdi5.js";import"./CaretDownOutlined-BxctymRA.js";import"./index-5PrSJtCq.js";import"./Input-DlD3j6GW.js";import"./inputProps-CIG3Q6HA.js";import"./Search-BjDfM7wD.js";import"./isPlainObject-B3m2dvNk.js";import"./TextArea-DnYx9N6z.js";import"./Password-B-_rMC_p.js";const K={class:"zm-date"},X={class:"date-btn"},tt={class:"date-content"},et={__name:"date",props:{dateType:{type:Number,default:1},rangeData:{type:Array,default:null}},emits:["dateChange"],setup(l,{emit:b}){const g=l,t=f(1),w=b;let D=B([{label:"今日",value:!1,key:2,start_date:u(),end_date:u()},{label:"昨日",value:!1,key:3,start_date:u().subtract(1,"day"),end_date:u().subtract(1,"day")},{label:"近七日",value:!0,key:4,start_date:u().subtract(6,"day"),end_date:u().subtract(0,"day")}]);const y=f(null),p=f(null),c=f([]),S=e=>e>=u().subtract(0,"day"),Y=()=>{let e=t.value,a=null;D.forEach(d=>{d.key==e&&(a=d)}),c.value=[a.start_date,a.end_date],y.value=a.start_date.format("YYYY-MM-DD"),p.value=a.end_date.format("YYYY-MM-DD"),C()},z=(e,a)=>{t.value=1,c.value=e,y.value=a[0],p.value=a[1],C()},C=()=>{w("dateChange",{start_date:y.value,end_date:p.value})};return L(()=>{t.value=g.dateType,c.value=g.rangeData}),(e,a)=>{const d=F,n=H,h=O;return v(),x("div",K,[o("div",X,[r(n,{value:t.value,"onUpdate:value":a[0]||(a[0]=i=>t.value=i),onChange:Y},{default:_(()=>[(v(!0),x(N,null,U(Q(D),i=>(v(),$(d,{class:"date-btn-button",value:i.key,key:i.key},{default:_(()=>[k(m(i.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),o("div",tt,[r(h,{value:c.value,"onUpdate:value":a[1]||(a[1]=i=>c.value=i),onChange:z,format:"YYYY-MM-DD",disabledDate:S},null,8,["value"])])])}}},T=l=>(A("data-v-2f4ef067"),l=l(),E(),l),at={class:"team-members-pages"},ot={class:"total"},st=T(()=>o("div",{class:"label total-label"},"共计：",-1)),nt={class:"total-num"},lt={class:"set-model"},dt=T(()=>o("div",{class:"label set-model-label"},"选择模型：",-1)),_t={class:"set-model-body"},rt={class:"set-date"},it=T(()=>o("div",{class:"label set-date-label"},[o("span",null,"统计日期：")],-1)),pt={class:"set-date-body"},ct={class:"set-reset"},ut={class:"list-box"},mt={class:"user-box"},vt={class:"name-info"},ht={class:"user-name"},ft={__name:"use-token",setup(l){const b=f(Date.now()),g=f(["全部模型"]),t=B({page:1,size:10,total:0,use_model:"全部模型",start_date:"",end_date:""}),w=e=>{t.start_date=e.start_date,t.end_date=e.end_date,p()},D=()=>{t.use_model="全部模型",t.start_date="",t.end_date="",b.value=Date.now(),p()},y=e=>{t.page=e.current,t.size=e.pageSize,Y()},p=()=>{t.page=1,Y()},c=f([]),S=(e,a)=>{const d=(e.split(".")[1]?e.split(".")[1]:e.split(".")[0]).length,n=(a.split(".")[1]?a.split(".")[1]:a.split(".")[0]).length,h=Math.pow(10,Math.max(d,n));return(e*h+a*h)/h/1e3},Y=()=>{let e={page:t.page,size:t.size,start_date:t.start_date,end_date:t.end_date};t.use_model!="全部模型"&&(e.model=t.use_model),R(e).then(a=>{let d=a.data.list;d.forEach(n=>{n.create_time=n.create_time>0?u(n.create_time*1e3).format("YYYY-MM-DD HH:mm"):"--",n.amount=S(n.prompt_token,n.completion_token)}),c.value=d,t.total=+a.data.total})},z=e=>{t.use_model=e,p()},C=()=>{j({}).then(e=>{g.value=["全部模型",...e.data]})};return L(()=>{C(),p()}),(e,a)=>{const d=J,n=W,h=V,i=q,M=Z,P=G;return v(),x("div",at,[r(i,{justify:"flex-end"},{default:_(()=>[o("div",ot,[st,o("div",nt,m(t.total)+"条",1)]),o("div",lt,[dt,o("div",_t,[r(n,{value:t.use_model,"onUpdate:value":a[0]||(a[0]=s=>t.use_model=s),placeholder:"全部模型",onChange:z,style:{width:"200px"}},{default:_(()=>[(v(!0),x(N,null,U(g.value,s=>(v(),$(d,{key:s,value:s},{default:_(()=>[o("span",null,m(s),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])])]),o("div",rt,[it,o("div",pt,[(v(),$(et,{onDateChange:w,key:b.value}))])]),o("div",ct,[r(h,{onClick:D},{default:_(()=>[k("重置")]),_:1})])]),_:1}),o("div",ut,[r(P,{"data-source":c.value,pagination:t.total>t.size?{current:t.page,total:t.total,pageSize:t.size,showQuickJumper:!0,showSizeChanger:!0,pageSizeOptions:["10","20","50","100"]}:!1,onChange:y},{default:_(()=>[r(M,{title:"模型名称","data-index":"model",width:"300px"},{default:_(({record:s})=>[o("div",mt,[o("div",vt,[o("div",ht,m(s.corp)+"（"+m(s.model)+"）",1)])])]),_:1}),r(M,{title:"类型","data-index":"IP",width:"190px"},{default:_(({record:s})=>[k(m(s.type),1)]),_:1}),r(M,{title:"Token消耗(k)","data-index":"amount",width:"190px"},{default:_(({record:s})=>[k(m(s.amount),1)]),_:1}),r(M,{title:"日期","data-index":"date",width:"190px"},{default:_(({record:s})=>[k(m(s.date),1)]),_:1})]),_:1},8,["data-source","pagination"])])])}}},gt=I(ft,[["__scopeId","data-v-2f4ef067"]]),bt=l=>(A("data-v-e3e860f2"),l=l(),E(),l),yt={class:"user-model-page"},kt=bt(()=>o("div",{class:"page-title"},"Token使用",-1)),xt={class:"list-wrapper"},Dt={__name:"index",setup(l){return(b,g)=>(v(),x("div",yt,[kt,o("div",xt,[r(gt)])]))}},De=I(Dt,[["__scopeId","data-v-e3e860f2"]]);export{De as default};
