import{e as p,b as K,x as T,o as B,M as o,N as a,W as f,F as g,a7 as y,Y as b,Z as m,G as M,H as N,$ as w,a0 as h}from"./vue-chunks-DWnFCQSz.js";import{b as H}from"../../index-UhR4yadr.js";const O={class:"selected-item"},E=["src"],P={key:0},W={key:1,class:"placeholder"},_={key:0,class:"option-group"},A=["src"],F=["onClick"],Y={__name:"index",props:{modelValue:[String,Number],options:{type:Array,default:()=>[]},placeholder:{type:String,default:"请选择"},groupLabelKey:{type:String,default:"groupLabel"},groupIconKey:{type:String,default:"groupIcon"},iconKey:{type:String,default:"icon"},labelKey:{type:String,default:"label"},valueKey:{type:String,default:"value"},showValue:{type:Boolean,default:!0},modelDefine:{type:Array,default:()=>[]},modelConfigId:{type:String,default:""}},emits:["update:modelValue","change"],setup(l,{emit:I}){const v=l,k=I,d=p(!1),u=K(()=>{const{modelConfigId:e,modelDefine:n,modelValue:t}=v;let c={};return V.value.find(i=>{const{rawData:s}=i;n.includes(s.model_define)&&s.deployment_name?(s.deployment_name===t||s.id===e)&&(c=i):s.name===t&&s.id===e&&(c=i)}),c}),V=K(()=>v.options.reduce((e,n)=>e.concat(n.children||[]),[])),r=p(0),x=p(!1),C=e=>{const n=e.currentTarget,t=e.deltaY,c=n.scrollHeight-n.clientHeight,i=r.value+t<=0,s=r.value+t>=c;e.stopPropagation(),!i&&!s?(n.scrollTop+=t,e.preventDefault()):r.value===0&&t<0||r.value===c&&t>0?x.value=!1:(n.scrollTop=Math.max(0,Math.min(c,r.value+t)),e.preventDefault()),r.value=n.scrollTop},D=()=>{d.value=!d.value},L=e=>{k("update:modelValue",e[v.valueKey]),k("change",e),d.value=!1},S=e=>{e.target.closest(".custom-select")||(d.value=!1)};return T(()=>{document.addEventListener("click",S)}),B(()=>{document.removeEventListener("click",S)}),(e,n)=>(o(),a("div",{class:"custom-select",onClick:h(D,["stop"])},[f("div",O,[u.value?(o(),a(g,{key:0},[u.value[l.iconKey]?(o(),a("img",{key:0,src:u.value[l.iconKey],class:"model-icon"},null,8,E)):y("",!0),f("span",null,[b(m(u.value[l.labelKey])+" ",1),l.showValue&&u.value[l.valueKey]?(o(),a("span",P,m(u.value[l.valueKey]),1)):y("",!0)])],64)):(o(),a("span",W,m(l.placeholder),1))]),M(f("div",{class:"custom-options",onWheel:h(C,["prevent"])},[(o(!0),a(g,null,w(l.options,(t,c)=>(o(),a("div",{key:c},[t.groupLabel?(o(),a("div",_,[t[l.groupIconKey]?(o(),a("img",{key:0,src:t[l.groupIconKey],class:"model-icon"},null,8,A)):y("",!0),b(" "+m(t[l.groupLabelKey]),1)])):y("",!0),(o(!0),a(g,null,w(t.children,(i,s)=>(o(),a("div",{key:s,class:"option-item",onClick:h($=>L(i),["stop"])},[f("span",null,m(i[l.valueKey]),1)],8,F))),128))]))),128))],544),[[N,d.value]])]))}},Z=H(Y,[["__scopeId","data-v-e2f6f0b3"]]);export{Z as C};
