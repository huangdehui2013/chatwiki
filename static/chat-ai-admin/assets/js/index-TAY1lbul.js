import{C as J}from"./cu-scroll-DUDOFjFZ.js";import{s as V,g as j,a as A,b as D,d as E}from"./index-DGEkiu9S.js";import{e as u,M as a,N as d,k as r,S as n,W as o,Y as y,F as M,$ as U,a0 as F,Z as g,a7 as O,a1 as P,a2 as Q,a5 as q,B as Y,u as Z,Q as L}from"./vue-chunks-Dpmhapcm.js";import{b as R,k as N,M as T,B as G,E as H}from"../../index-DJqZYlN8.js";import"./index-Dk60SqR7.js";import{R as K,_ as X}from"./RadioButton-BdTnsnL8.js";import{C as tt}from"./index-D7LiUNoj.js";import{_ as et}from"./TextArea-DEZsPG5C.js";import{P as ot}from"./PlusOutlined-CTNlEK-E.js";import{_ as st}from"./index-BY-bgrX3.js";import{_ as at}from"./index-D7DELBhV.js";import{_ as it}from"./index-Bpgeg3Jc.js";import{a as nt}from"./index-B3bBS2VZ.js";import"./pull-up.esm-JZ91zQ8P.js";import"./observe-dom.esm-DPKTicVt.js";import"./axios-Cm0UX6qg.js";import"./qs--NVn7pjl.js";import"./crypto-js-DjHh3pn1.js";import"./dayjs-BAOQ3IvD.js";import"./FormItemContext-DcHP2mNJ.js";import"./Checkbox-DQSCt5wV.js";import"./index-DaFSI5Qu.js";import"./statusUtils-Bnl8Rf7N.js";import"./index-Bn-6W96d.js";import"./Trigger-DcF6kXOl.js";import"./inputProps-B4Qz7YgH.js";import"./index-DGofXs4a.js";import"./colors-CZV0Zir8.js";import"./index-NxOBHTpX.js";import"./useMaxLevel-ChHJkfrX.js";import"./index-DT9vq-9c.js";import"./slide-B4S8cqER.js";import"./CheckOutlined-D8sWUycq.js";import"./DownOutlined-D5t3juQ7.js";import"./SearchOutlined-C4P1S4P5.js";import"./move-B1-eDBNJ.js";import"./collapseMotion-DmHD1G9F.js";import"./responsiveObserve-D_TTA_LO.js";import"./css-DbBMd65r.js";import"./fromPairs-Dx9PT-t0.js";import"./index-2EWY1GCt.js";import"./LeftOutlined-BBd11KLM.js";import"./RightOutlined-CJJrtf85.js";import"./index-CUiqpg-W.js";import"./dropdown-CmzzPYoT.js";import"./Dropdown-DicWDWIK.js";import"./index-BW4jDb4d.js";import"./shallowequal-KOHJRfiy.js";import"./CaretDownOutlined-8hpeo-8F.js";import"./index-9XFVXge0.js";import"./Input-k3gxptQd.js";import"./Search-CxIvru6q.js";import"./isPlainObject--mHlhHEN.js";import"./Password-DASsPHld.js";const W=x=>(P("data-v-a8be05df"),x=x(),Q(),x),lt={class:"form-modal-box"},rt={class:"form-item"},dt=W(()=>o("div",{class:"form-label"},[y("敏感词"),o("span",null,"(一行一个，最多1000个敏感词)")],-1)),_t={class:"form-content"},ct={class:"form-item"},pt=W(()=>o("div",{class:"form-label"},"生效机器人",-1)),ut={class:"form-content"},mt={key:0,class:"robot-list"},vt={class:"robot-name-text"},ht={__name:"add-sensitive-modal",props:{robotList:{type:Array,default:()=>[]}},emits:["ok"],setup(x,{expose:I,emit:c}){const z=c,h=x,w=u(!1),B=u("添加敏感词"),C=u(""),m=u(""),p=u(0),_=u([]),t=e=>{w.value=!0,C.value=e.id||"",m.value=e.words||"",p.value=+e.trigger_type||0,_.value=e.robot_ids||[]},v=e=>{_.value.includes(e.id)?_.value=_.value.filter(l=>l!==e.id):_.value.push(e.id)},f=()=>{if(!m.value)return N.error("请输入敏感词");if(p.value==1&&_.value.length==0)return N.error("请选择机器人");V({id:C.value,words:m.value,trigger_type:p.value,robot_ids:_.value.join(",")}).then(e=>{N.success(C.value?"修改成功":"添加成功"),w.value=!1,z("ok")})};return I({show:t}),(e,l)=>{const $=et,S=K,k=X,b=tt,s=T;return a(),d("div",null,[r(s,{open:w.value,"onUpdate:open":l[2]||(l[2]=i=>w.value=i),title:B.value,onOk:f,width:620},{default:n(()=>[o("div",lt,[o("div",rt,[dt,o("div",_t,[r($,{value:m.value,"onUpdate:value":l[0]||(l[0]=i=>m.value=i),placeholder:"请输入敏感词",style:{height:"160px"}},null,8,["value"])])]),o("div",ct,[pt,o("div",ut,[r(k,{value:p.value,"onUpdate:value":l[1]||(l[1]=i=>p.value=i)},{default:n(()=>[r(S,{value:0},{default:n(()=>[y("所有机器人")]),_:1}),r(S,{value:1},{default:n(()=>[y("指定机器人")]),_:1})]),_:1},8,["value"]),p.value==1?(a(),d("div",mt,[(a(!0),d(M,null,U(h.robotList,i=>(a(),d("div",{class:"checked-item",key:i.id},[r(b,{onClick:F(Nt=>v(i),["stop"]),checked:_.value.includes(i.id)},{default:n(()=>[o("div",vt,g(i.robot_name),1)]),_:2},1032,["onClick","checked"])]))),128))])):O("",!0)])])])]),_:1},8,["open","title"])])}}},ft=R(ht,[["__scopeId","data-v-a8be05df"]]),kt={class:"user-model-page"},bt={class:"page-title"},gt={class:"add-block"},yt={class:"list-wrapper"},xt={class:"content-box"},wt={class:"text-over-box"},Ct={key:1,class:"text-over-box"},St={key:0},$t={class:"text-over-box"},Ot={key:1,class:"text-over-box"},It=["onClick"],Lt=["onClick"],Mt={__name:"index",setup(x){q().query;const I=u([]),c=Y({page:1,size:20,total:0}),z=t=>{c.page=t.current,c.size=t.pageSize,h()},h=()=>{A({...c}).then(t=>{let v=t.data.list||[];I.value=v.map(f=>{let e=JSON.parse(f.robot_data),l=e.map(k=>k.robot_name).join(";"),$=e.map(k=>k.id),S=f.words.split(`
`).join("；");return{...f,robot_data:e,robot_name_desc:l,robot_ids:$,words_desc:S}}),c.total=t.data.total})};h();const w=t=>{D({id:t.id}).then(v=>{h()})},B=t=>{T.confirm({title:"删除确认",icon:r(H),content:`确定要删除敏感词[${t.words_desc}]吗？`,okText:"删除",okType:"danger",cancelText:"取消",onOk(){E({id:t.id}).then(v=>{N.success("删除成功"),h()})},onCancel(){}})},C=u(null),m=(t={})=>{C.value.show(JSON.parse(JSON.stringify(t)))},p=u([]);j().then(t=>{p.value=t.data||[]});const _=[{title:"敏感词",dataIndex:"words_desc",key:"words_desc",ellipsis:!0,width:300},{title:"生效机器人",dataIndex:"robot_name_desc",key:"robot_name_desc",ellipsis:!0,width:300},{title:"是否启用",key:"status",dataIndex:"status",width:150},{title:"操作",key:"action",width:120}];return(t,v)=>{const f=G,e=st,l=at,$=it,S=nt,k=J;return a(),d("div",kt,[o("div",bt,[y(" 敏感词管理 "),o("div",gt,[r(f,{type:"primary",onClick:v[0]||(v[0]=b=>m()),icon:r(Z(ot))},{default:n(()=>[y("添加敏感词")]),_:1},8,["icon"])])]),o("div",yt,[r(k,null,{default:n(()=>[o("div",xt,[r(S,{columns:_,"data-source":I.value,pagination:{current:c.page,total:c.total,pageSize:c.size,showQuickJumper:!0,showSizeChanger:!0,pageSizeOptions:["10","20","50","100"]},onChange:z},{bodyCell:n(({column:b,record:s})=>[b.key==="words_desc"?(a(),d(M,{key:0},[s.words_desc.length>20?(a(),L(e,{key:0,overlayStyle:{"max-width":"500px"}},{title:n(()=>[y(g(s.words_desc),1)]),default:n(()=>[o("div",wt,g(s.words_desc),1)]),_:2},1024)):(a(),d("div",Ct,g(s.words_desc),1))],64)):O("",!0),b.key==="robot_name_desc"?(a(),d(M,{key:1},[s.trigger_type==0?(a(),d("div",St,"所有机器人")):(a(),d(M,{key:1},[s.robot_name_desc.length>20?(a(),L(e,{key:0,overlayStyle:{"max-width":"500px"}},{title:n(()=>[y(g(s.robot_name_desc),1)]),default:n(()=>[o("div",$t,g(s.robot_name_desc),1)]),_:2},1024)):(a(),d("div",Ot,g(s.robot_name_desc),1))],64))],64)):O("",!0),b.key==="status"?(a(),L(l,{key:2,onChange:i=>w(s),checked:s.status==1,"checked-children":"开","un-checked-children":"关"},null,8,["onChange","checked"])):O("",!0),b.key==="action"?(a(),L($,{key:3,gap:12,style:{"white-space":"nowrap"}},{default:n(()=>[o("a",{onClick:i=>m(s)},"编辑",8,It),o("a",{onClick:i=>B(s)},"删除",8,Lt)]),_:2},1024)):O("",!0)]),_:1},8,["data-source","pagination"])])]),_:1}),r(ft,{onOk:h,robotList:p.value,ref_key:"addaddSensitiveModalRef",ref:C},null,8,["robotList"])])])}}},ze=R(Mt,[["__scopeId","data-v-daf9eb55"]]);export{ze as default};
