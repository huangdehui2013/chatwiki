import{_ as At}from"./cu-scroll-Bo1cIjk3.js";import{q as ee,Q as Qt,U as ue,C as Yt,p as _e,x as tt,I as rt,b as be,d as ct,M as oe,bR as ge,k as W,bS as Jt,h as dt,B as pt,bT as ye,bU as Wt,bQ as Xt,e as Zt,bV as Kt,bH as eo,n as ot,V as to,a1 as Ce,bq as ve,E as oo,aC as ao,bW as no,bX as so,bY as lo,bZ as io,b_ as uo}from"../../index-uZrSGPJ2.js";import{f as at,e as y,k as e,B as te,a4 as Le,M as i,N as o,S as a,W as t,a7 as _,Q as D,V as _o,u as T,F as E,a0 as re,a6 as mt,Z as $,a3 as Pe,Y as c,aa as Fe,a1 as Ue,a2 as Ie,d as xe,x as ro,D as co,ai as po,G as nt,H as mo,$ as Oe}from"./vue-chunks-Dagx-vSq.js";import{U as ft}from"./upload-input-DjjW16Oa.js";import{t as st}from"./validate-8MtiUsxW.js";import{F as ke,_ as Te}from"./index-BuYscfp6.js";import"./index-Jtlfy8YK.js";import{I as we}from"./Input-CkgxEQH_.js";import"./index-BZeZ1Fpr.js";import{_ as fo,R as vo}from"./RadioButton-B7NLGGfS.js";import{M as ho}from"./model-select-CZ-kRbBO.js";import{O as go}from"./open-grapg-modal-CNPgIiVp.js";import{D as yo}from"./DownOutlined-CJyYwwtm.js";import{U as ko}from"./UpOutlined-BXhmIP9E.js";import{S as De,a as Re}from"./index-CbTVyCU8.js";import{_ as bo}from"./index-DtLQi5KI.js";import{R as wo}from"./rename-modal-4KS83veW.js";import{_ as Co}from"./page-alert-CABTgDrU.js";import{C as xo}from"./index-DvpvmHbh.js";import{g as Oo,c as lt,d as $o,r as qo,a as So}from"./index-C5AG5J-Z.js";import{u as it}from"./FormItemContext-Cs8-ygLw.js";import"./index-o3ZFs3wF.js";import{D as Fo}from"./dropdown-DE5F1xap.js";import{P as Lo}from"./PlusOutlined-C4d6M8_0.js";import{M as Po,_ as Uo}from"./index-DGr8yI5G.js";import{S as Io}from"./SearchOutlined--FowkdKA.js";import{g as To}from"./index-BpPh0jW3.js";import{S as Do}from"./index-CM4FzrBV.js";import{C as $e}from"./ClockCircleFilled-B1dDXySF.js";import{_ as Ro}from"./index-BjccXk3u.js";import{S as Mo}from"./SyncOutlined-Ch07vr7Q.js";import{M as No}from"./MoreOutlined-kHjt-rxT.js";import{_ as zo}from"./index-B4Fh64Os.js";import{_ as Ho}from"./index-BaDCixtO.js";import{a as Eo}from"./index-ByxtaxSL.js";import{_ as Bo}from"./index-BFCa7S14.js";import{_ as Vo}from"./index-EWP4miKO.js";import{_ as jo}from"./TextArea-CjFwG0DD.js";import"./pull-up.esm-D94Swpvl.js";import"./observe-dom.esm-CyCedSm-.js";import"./axios-BZ84_VUH.js";import"./qs-CSiAN3u4.js";import"./crypto-js-DN0vhd75.js";import"./dayjs-CZ5VaChI.js";import"./InboxOutlined-BYN-CgUO.js";import"./Trigger-DoXVYhN4.js";import"./ResizeObserver.es-B1PUzC5B.js";import"./isPlainObject-CAcuZItg.js";import"./responsiveObserve-FU3Dn2XC.js";import"./collapseMotion-D5mGic4t.js";import"./QuestionCircleOutlined-DaqtyhFd.js";import"./index-CJgvF6wP.js";import"./Search-B1xKt77Y.js";import"./inputProps-CFzerOIV.js";import"./Password-DhHqQ7fn.js";import"./Checkbox-SbuG5kqh.js";import"./index-DZ2o5D62.js";import"./slide-BIPMUmGB.js";import"./index-BIs6ICi9.js";import"./CheckOutlined-l1N7JgI5.js";import"./move-Cj-Coe07.js";import"./index-BQH61rer.js";import"./index-Ck7gVULt.js";import"./colors-Bq--hzfJ.js";import"./shallowequal-CI97GdPH.js";import"./RightOutlined-BOG0y4Nw.js";import"./DownloadOutlined-UDtYdZdd.js";import"./index-Dcu1AEuu.js";import"./useMaxLevel-G_tCMKFf.js";import"./CaretDownFilled-DFwBTbBj.js";import"./css-DbBMd65r.js";import"./fromPairs-Dx9PT-t0.js";import"./LeftOutlined-q_SFvfQo.js";import"./CaretDownOutlined-BrBGZpG7.js";const qe=()=>({format:String,showNow:ue(),showHour:ue(),showMinute:ue(),showSecond:ue(),use12Hours:ue(),hourStep:Number,minuteStep:Number,secondStep:Number,hideDisabledOptions:ue(),popupClassName:String,status:Qt()});function Go(d){const g=Oo(d,ee(ee({},qe()),{order:{type:Boolean,default:!0}})),{TimePicker:w,RangePicker:q}=g,m=at({name:"ATimePicker",inheritAttrs:!1,props:ee(ee(ee(ee({},lt()),$o()),qe()),{addon:{type:Function}}),slots:Object,setup(P,z){let{slots:S,expose:F,emit:f,attrs:r}=z;const C=P,N=it();Yt(!(S.addon||C.addon),"TimePicker","`addon` is deprecated. Please use `v-slot:renderExtraFooter` instead.");const U=y();F({focus:()=>{var l;(l=U.value)===null||l===void 0||l.focus()},blur:()=>{var l;(l=U.value)===null||l===void 0||l.blur()}});const M=(l,H)=>{f("update:value",l),f("change",l,H),N.onFieldChange()},k=l=>{f("update:open",l),f("openChange",l)},x=l=>{f("focus",l)},Z=l=>{f("blur",l),N.onFieldBlur()},h=l=>{f("ok",l)};return()=>{const{id:l=N.id.value}=C;return e(w,_e(_e(_e({},r),tt(C,["onUpdate:value","onUpdate:open"])),{},{id:l,dropdownClassName:C.popupClassName,mode:void 0,ref:U,renderExtraFooter:C.addon||S.addon||C.renderExtraFooter||S.renderExtraFooter,onChange:M,onOpenChange:k,onFocus:x,onBlur:Z,onOk:h}),S)}}}),X=at({name:"ATimeRangePicker",inheritAttrs:!1,props:ee(ee(ee(ee({},lt()),qo()),qe()),{order:{type:Boolean,default:!0}}),slots:Object,setup(P,z){let{slots:S,expose:F,emit:f,attrs:r}=z;const C=P,N=y(),U=it();F({focus:()=>{var v;(v=N.value)===null||v===void 0||v.focus()},blur:()=>{var v;(v=N.value)===null||v===void 0||v.blur()}});const M=(v,V)=>{f("update:value",v),f("change",v,V),U.onFieldChange()},k=v=>{f("update:open",v),f("openChange",v)},x=v=>{f("focus",v)},Z=v=>{f("blur",v),U.onFieldBlur()},h=(v,V)=>{f("panelChange",v,V)},l=v=>{f("ok",v)},H=(v,V,Q)=>{f("calendarChange",v,V,Q)};return()=>{const{id:v=U.id.value}=C;return e(q,_e(_e(_e({},r),tt(C,["onUpdate:open","onUpdate:value"])),{},{id:v,dropdownClassName:C.popupClassName,picker:"time",mode:void 0,ref:N,onChange:M,onOpenChange:k,onFocus:x,onBlur:Z,onPanelChange:h,onOk:l,onCalendarChange:H}),S)}}});return{TimePicker:m,TimeRangePicker:X}}const{TimePicker:he,TimeRangePicker:Se}=Go(So),vt=ee(he,{TimePicker:he,TimeRangePicker:Se,install:d=>(d.component(he.name,he),d.component(Se.name,Se),d)});var Ao={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2L263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"}}]},name:"copy",theme:"outlined"};function ut(d){for(var g=1;g<arguments.length;g++){var w=arguments[g]!=null?Object(arguments[g]):{},q=Object.keys(w);typeof Object.getOwnPropertySymbols=="function"&&(q=q.concat(Object.getOwnPropertySymbols(w).filter(function(m){return Object.getOwnPropertyDescriptor(w,m).enumerable}))),q.forEach(function(m){Qo(d,m,w[m])})}return d}function Qo(d,g,w){return g in d?Object.defineProperty(d,g,{value:w,enumerable:!0,configurable:!0,writable:!0}):d[g]=w,d}var Me=function(g,w){var q=ut({},g,w.attrs);return e(rt,ut({},q,{icon:Ao}),null)};Me.displayName="CopyOutlined";Me.inheritAttrs=!1;var Yo={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M742 318V184h86c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H196c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h86v134c0 81.5 42.4 153.2 106.4 194-64 40.8-106.4 112.5-106.4 194v134h-86c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h632c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8h-86V706c0-81.5-42.4-153.2-106.4-194 64-40.8 106.4-112.5 106.4-194z"}}]},name:"hourglass",theme:"filled"};function _t(d){for(var g=1;g<arguments.length;g++){var w=arguments[g]!=null?Object(arguments[g]):{},q=Object.keys(w);typeof Object.getOwnPropertySymbols=="function"&&(q=q.concat(Object.getOwnPropertySymbols(w).filter(function(m){return Object.getOwnPropertyDescriptor(w,m).enumerable}))),q.forEach(function(m){Jo(d,m,w[m])})}return d}function Jo(d,g,w){return g in d?Object.defineProperty(d,g,{value:w,enumerable:!0,configurable:!0,writable:!0}):d[g]=w,d}var Ne=function(g,w){var q=_t({},g,w.attrs);return e(rt,_t({},q,{icon:Yo}),null)};Ne.displayName="HourglassFilled";Ne.inheritAttrs=!1;const Wo={class:"form-box"},Xo={class:"upload-document-type-box"},Zo=["onClick"],Ko={class:"right-block"},ea={class:"title-block"},ta={class:"title-text"},oa={class:"desc"},aa={__name:"add-custom-document",props:{libraryInfo:{type:Object,default:()=>{}}},emits:["ok"],setup(d,{expose:g,emit:w}){const q=Pe(),m=Le(),X=ke.useForm,P=y(!1),z=y("添加自定义文档"),S=d,F=te({library_id:m.query.id,doc_type:3,file_name:"",is_qa_doc:0,qa_index_type:1}),f=y([{iconName:"file-search",iconNameActive:"file-search",title:"问题与答案一起生成索引",value:1,desc:"回答用户提问时，将用户提问与导入的问题和答案一起对比相似度，根据相似度高的问题和答案回复"},{iconName:"comment-search",iconNameActive:"comment-search",title:"仅对问题生成索引",value:2,desc:"回答用户提问时，将用户提问与导入的问题一起对比相似度，再根据相似度高的问题和对应的答案来回复"}]),r=h=>{F.qa_index_type=h},C=te({file_name:[{message:"请输入昵称",required:!0}]}),{resetFields:N,validate:U,validateInfos:M}=X(F,C),k=()=>{P.value=!0,N(),F.file_name="",F.is_qa_doc=0,F.qa_index_type=1,S.libraryInfo.type==2&&(F.is_qa_doc=1)},x=y(!1),Z=()=>{U().then(()=>{let h={...Fe(F)};x.value=!0,ge(h).then(l=>{W.success(`${z.value}成功`),P.value=!1,q.push("/library/preview?id="+l.data.file_ids[0])}).finally(()=>{x.value=!1})})};return g({add:k}),(h,l)=>{const H=we,v=Te,V=vo,Q=fo,I=ct,b=ke,ce=oe;return o(),i("div",null,[e(ce,{open:P.value,"onUpdate:open":l[2]||(l[2]=B=>P.value=B),title:z.value,onOk:Z,width:"472px",confirmLoading:x.value},{default:a(()=>[t("div",Wo,[e(b,{layout:"vertical"},{default:a(()=>[e(v,_o({label:"文档名称"},T(M).file_name),{default:a(()=>[e(H,{type:"text",placeholder:"请输入文档名称",value:F.file_name,"onUpdate:value":l[0]||(l[0]=B=>F.file_name=B)},null,8,["value"])]),_:1},16),_("",!0),F.is_qa_doc==1?(o(),D(v,{key:1,label:"索引方式",required:""},{default:a(()=>[t("div",Xo,[(o(!0),i(E,null,re(f.value,B=>(o(),i("div",{class:mt(["type-item",{active:F.qa_index_type==B.value}]),key:B.value,onClick:He=>r(B.value)},[t("div",Ko,[t("div",ea,[e(I,{name:F.qa_index_type==B.value?B.iconNameActive:B.iconName},null,8,["name"]),t("div",ta,$(B.title),1)]),t("div",oa,$(B.desc),1)]),F.qa_index_type==B.value?(o(),D(I,{key:0,class:"check-arrow",name:"check-arrow-filled",style:{"font-size":"24px",color:"#fff"}})):_("",!0)],10,Zo))),128))])]),_:1})):_("",!0)]),_:1})])]),_:1},8,["open","title","confirmLoading"])])}}},na=be(aa,[["__scopeId","data-v-0fbc9294"]]),ae=d=>(Ue("data-v-64d599b8"),d=d(),Ie(),d),sa={class:"alert-box"},la=ae(()=>t("div",null,[c(" 通过word或者EXce形式导入问答对，建议您参考"),t("a",{href:"https://xkf-upload-oss.xiaokefu.com.cn/static/chat-wiki/template/FAQ导入模板.docx"},"word导入模板"),c("  "),t("a",{href:"https://xkf-upload-oss.xiaokefu.com.cn/static/chat-wiki/template/FAQ 导入模板.xlsx"},"Excel导入模板"),c("创建导入文档 ")],-1)),ia=ae(()=>t("div",null,"如果您不是使用导入模板创建的文档，可以点击高级设置指定提取规则",-1)),ua={class:"upload-file-box"},_a={key:0,class:"hight-set"},ra={key:0,class:"set-box"},ca={class:"form-item"},da=ae(()=>t("div",{class:"form-item-label"},"问题所在列：",-1)),pa={class:"form-item-body"},ma={class:"form-item"},fa=ae(()=>t("div",{class:"form-item-label"},"相似问法所在列：",-1)),va={class:"form-item-body"},ha={class:"form-item"},ga=ae(()=>t("div",{class:"form-item-label"},"答案所在列：",-1)),ya={class:"form-item-body"},ka={key:1,class:"set-box"},ba={class:"form-item"},wa=ae(()=>t("div",{class:"form-item-label"},"问题开始标识符：",-1)),Ca={class:"form-item-body"},xa={class:"form-item"},Oa=ae(()=>t("div",{class:"form-item-label"},"相似问法开始标识符：",-1)),$a={class:"form-item-body"},qa={class:"form-item"},Sa=ae(()=>t("div",{class:"form-item-label"},"答案开始标识符：",-1)),Fa={class:"form-item-body"},La={__name:"qa-upload-modal",emits:["ok"],setup(d,{expose:g,emit:w}){const q=Pe(),X=Le().query,P=y(!1),z=y(!1),S=y([]),F=w,f=y([]),r=te({question_column:void 0,answer_column:void 0,similar_column:void 0,question_lable:"问题：",answer_lable:"答案：",similar_label:"相似问题："}),C=y(!0),N=()=>{P.value=!0},U=()=>{let h=new FormData;S.value.forEach(l=>{h.append("library_files",l)}),Jt(h).then(l=>{let H=[];for(let v in l.data)H.push({lable:l.data[v],value:v});f.value=H})},M=()=>{if(S.value.length==0){W.error("请选择文件");return}z.value=!0;let h=new FormData;h.append("library_id",X.id);let l=!1;S.value.forEach(H=>{(H.name.includes(".xlsx")||H.name.includes(".csv"))&&(l=!0),h.append("library_files",H)}),l?(h.append("question_column",r.question_column),h.append("answer_column",r.answer_column),r.similar_column&&h.append("similar_column",r.similar_column)):(h.append("question_lable",r.question_lable),h.append("answer_lable",r.answer_lable),h.append("similar_label",r.similar_label)),h.append("is_qa_doc",1),ge(h).then(H=>{F("ok"),P.value=!1,S.value=[],z.value=!1,l&&q.push("/library/document-segmentation?document_id="+H.data.file_ids[0])}).catch(()=>{z.value=!1})},k=()=>{S.value=[]},x=y(1),Z=h=>{r.question_column=void 0,r.answer_column=void 0,r.similar_column=void 0,r.question_lable="问题：",r.answer_lable="答案：",r.similar_label="相似问题：",S.value=h,h&&h.length>0&&(h[0].type.includes(".document")?x.value=2:(x.value=1,U()))};return g({show:N}),(h,l)=>{const H=bo,v=Re,V=De,Q=we,I=oe;return o(),i("div",null,[e(I,{width:680,open:P.value,"onUpdate:open":l[8]||(l[8]=b=>P.value=b),"confirm-loading":z.value,maskClosable:!1,title:"上传文档",onOk:M,onCancel:k},{default:a(()=>[t("div",sa,[e(H,{"show-icon":""},{message:a(()=>[la,ia]),_:1})]),t("div",ua,[e(ft,{type:2,value:S.value,"onUpdate:value":l[0]||(l[0]=b=>S.value=b),onChange:Z},null,8,["value"])]),S.value.length>0?(o(),i("div",_a,[t("a",{onClick:l[1]||(l[1]=b=>C.value=!C.value)},[c("高级设置： "),C.value?(o(),D(T(ko),{key:1})):(o(),D(T(yo),{key:0}))]),C.value?(o(),i(E,{key:0},[x.value==1?(o(),i("div",ra,[t("div",ca,[da,t("div",pa,[e(V,{value:r.question_column,"onUpdate:value":l[2]||(l[2]=b=>r.question_column=b),placeholder:"请选择列名",style:{width:"100%"}},{default:a(()=>[(o(!0),i(E,null,re(f.value,b=>(o(),D(v,{value:b.value,key:b.value},{default:a(()=>[c($(b.lable),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])])]),t("div",ma,[fa,t("div",va,[e(V,{value:r.similar_column,"onUpdate:value":l[3]||(l[3]=b=>r.similar_column=b),placeholder:"请选择相似问题所在列",style:{width:"100%"}},{default:a(()=>[(o(!0),i(E,null,re(f.value,b=>(o(),D(v,{value:b.value,key:b.value},{default:a(()=>[c($(b.lable),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])])]),t("div",ha,[ga,t("div",ya,[e(V,{value:r.answer_column,"onUpdate:value":l[4]||(l[4]=b=>r.answer_column=b),placeholder:"请选择答案所在列",style:{width:"100%"}},{default:a(()=>[(o(!0),i(E,null,re(f.value,b=>(o(),D(v,{value:b.value,key:b.value},{default:a(()=>[c($(b.lable),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])])])])):_("",!0),x.value==2?(o(),i("div",ka,[t("div",ba,[wa,t("div",Ca,[e(Q,{placeholder:"请输入标识符",value:r.question_lable,"onUpdate:value":l[5]||(l[5]=b=>r.question_lable=b)},null,8,["value"])])]),t("div",xa,[Oa,t("div",$a,[e(Q,{placeholder:"请输入标识符",value:r.similar_label,"onUpdate:value":l[6]||(l[6]=b=>r.similar_label=b)},null,8,["value"])])]),t("div",qa,[Sa,t("div",Fa,[e(Q,{placeholder:"请输入标识符",value:r.answer_lable,"onUpdate:value":l[7]||(l[7]=b=>r.answer_lable=b)},null,8,["value"])])])])):_("",!0)],64)):_("",!0)])):_("",!0)]),_:1},8,["open","confirm-loading"])])}}},Pa=be(La,[["__scopeId","data-v-64d599b8"]]),Ua="/assets/img/guide-image-DSu20zRj.png",ze=d=>(Ue("data-v-d94a3a33"),d=d(),Ie(),d),Ia={class:"container"},Ta={class:"guide-content"},Da=ze(()=>t("img",{src:Ua,alt:"操作引导",class:"guide-image"},null,-1)),Ra={class:"content-box"},Ma=ze(()=>t("div",{class:"content-info"},'单次上传多个文档，上传成功后，需要手动点击文档后面 "学习" 进行学习；如果文档学习失败，支持重新学习',-1)),Na=ze(()=>t("div",{class:"content-check"},"不再显示此提示",-1)),za={__name:"guide-learning-tips",setup(d,{expose:g}){const w=dt(),q=y(!1),m=y(!1),X=y(""),P=()=>{setTimeout(()=>{q.value=!0},500)},z=()=>{w.setGuideLearningTips(m.value),q.value=!1},S=()=>{w.setGuideLearningTips(m.value),q.value=!1};return g({show:P}),(F,f)=>{const r=xo,C=pt,N=oe;return o(),i("div",Ia,[e(N,{open:q.value,"onUpdate:open":f[1]||(f[1]=U=>q.value=U),title:X.value,onOk:z,onCancel:S,width:"472px"},{footer:a(()=>[e(C,{type:"primary",onClick:z},{default:a(()=>[c("我知道了")]),_:1})]),default:a(()=>[t("div",Ta,[Da,t("div",Ra,[Ma,e(r,{checked:m.value,"onUpdate:checked":f[0]||(f[0]=U=>m.value=U)},{default:a(()=>[Na]),_:1},8,["checked"])])])]),_:1},8,["open","title"])])}}},Ha=be(za,[["__scopeId","data-v-d94a3a33"]]),Ea={__name:"edit-online-doc",emits:["ok"],setup(d,{expose:g,emit:w}){const q=w,m=te({id:"",file_name:"",doc_auto_renew_frequency:1,doc_auto_renew_minute:""}),X=y({file_name:[{message:"请文档名称",required:!0}],doc_auto_renew_frequency:[{message:"请选择更新频率",required:!0}]}),P=y(!1),z=r=>{r=JSON.parse(JSON.stringify(r)),m.id=r.id||"",m.file_name=r.file_name||"",m.doc_auto_renew_frequency=+r.doc_auto_renew_frequency||1,r.doc_auto_renew_minute>0&&(m.doc_auto_renew_minute=ye(r.doc_auto_renew_minute)),P.value=!0},S=y(!1),F=y(null),f=()=>{F.value.validate().then(()=>{S.value=!0,Wt({...m,doc_auto_renew_minute:m.doc_auto_renew_minute?ye(m.doc_auto_renew_minute):0}).then(()=>{P.value=!1,S.value=!1,q("ok")})}).catch(()=>{S.value=!1})};return g({show:z}),(r,C)=>{const N=we,U=Te,M=Re,k=De,x=vt,Z=ke,h=oe;return o(),i("div",null,[e(h,{open:P.value,"onUpdate:open":C[3]||(C[3]=l=>P.value=l),"confirm-loading":S.value,maskClosable:!1,title:"添加在线数据",width:"746px",onOk:f},{default:a(()=>[e(Z,{class:"url-add-form",layout:"vertical",ref_key:"urlFormRef",ref:F,model:m,rules:X.value},{default:a(()=>[e(U,{name:"file_name",label:"文件名称"},{default:a(()=>[e(N,{value:m.file_name,"onUpdate:value":C[0]||(C[0]=l=>m.file_name=l),placeholder:"请输入"},null,8,["value"])]),_:1}),e(U,{name:"doc_auto_renew_frequency",label:"更新频率"},{default:a(()=>[e(k,{value:m.doc_auto_renew_frequency,"onUpdate:value":C[1]||(C[1]=l=>m.doc_auto_renew_frequency=l),style:{width:"100%"}},{default:a(()=>[e(M,{value:1},{default:a(()=>[c("不自动更新")]),_:1}),e(M,{value:2},{default:a(()=>[c("每天")]),_:1}),e(M,{value:3},{default:a(()=>[c("每3天")]),_:1}),e(M,{value:4},{default:a(()=>[c("每7天")]),_:1}),e(M,{value:5},{default:a(()=>[c("每30天")]),_:1})]),_:1},8,["value"])]),_:1}),m.doc_auto_renew_frequency>1?(o(),D(U,{key:0,name:"doc_auto_renew_minute",label:"更新时间"},{default:a(()=>[e(x,{valueFormat:"HH:mm",value:m.doc_auto_renew_minute,"onUpdate:value":C[2]||(C[2]=l=>m.doc_auto_renew_minute=l),format:"HH:mm"},null,8,["value"])]),_:1})):_("",!0)]),_:1},8,["model","rules"])]),_:1},8,["open","confirm-loading"])])}}},A=d=>(Ue("data-v-8e20bb5d"),d=d(),Ie(),d),Ba={class:"details-library-page"},Va={class:"list-tools"},ja={class:"tools-items"},Ga={class:"tool-item"},Aa={class:"dropdown-btn-menu"},Qa=A(()=>t("div",{class:"title"},"本地文档",-1)),Ya={key:0,class:"desc"},Ja={key:1,class:"desc"},Wa={class:"dropdown-btn-menu"},Xa=A(()=>t("div",{class:"title"},"在线数据",-1)),Za=A(()=>t("div",{class:"desc"},"获取在线网页内容",-1)),Ka={class:"dropdown-btn-menu"},en=A(()=>t("div",{class:"title"},"自定义文档",-1)),tn=A(()=>t("div",{class:"desc"},"自定义一个空文档，手动添加内容",-1)),on=A(()=>t("span",null,"添加内容",-1)),an=A(()=>t("span",null,"嵌入模型：",-1)),nn=A(()=>t("span",null,"生成知识图谱：",-1)),sn={class:"right-box"},ln={key:0,class:"status-box"},un={class:"status-item"},_n=A(()=>t("div",{class:"status-label"},"已学习：",-1)),rn={class:"status-content"},cn={class:"status-item"},dn=A(()=>t("div",{class:"status-label"},"，未学习：",-1)),pn={class:"status-content content-tip"},mn={class:"status-item"},fn=A(()=>t("div",{class:"status-label"},"，学习失败：",-1)),vn={class:"status-content content-tip"},hn={key:1,class:"status-select-box"},gn={class:"tool-item"},yn=A(()=>t("div",null,[t("p",null,' 1、如果单次上传一个文档，上传成功后，系统会自动学习；如果单次上传多个文档，上传成功后，需要手动点击文档后面"学习"进行学习；如果解析失败，支持重新学习。 '),t("p",null,"2、未学习的文档数据不会被检索到。")],-1)),kn={class:"list-content"},bn={key:0,class:"doc-name-td"},wn=["href"],Cn=["onClick"],xn={key:0},On={key:1},$n=["onClick"],qn={key:0},Sn={key:1},Fn={key:2,class:"url-remark"},Ln=["onClick"],Pn={key:0,class:"pdf-progress-box"},Un={class:"progress-title"},In={class:"status-box"},Tn=["onClick"],Dn={class:"progress-bar"},Rn={class:"num-box"},Mn={key:0,class:"status-tag running"},Nn={key:2,class:"status-tag running"},zn={key:3,class:"status-tag complete"},Hn={class:"status-tag status-error"},En=["onClick"],Bn={class:"status-tag status-error"},Vn={class:"status-tag"},jn=["onClick"],Gn={key:7,class:"status-tag"},An={key:8,class:"status-tag running"},Qn={class:"status-tag error"},Yn={key:10,class:"status-tag cancel"},Jn={key:11,class:"status-tag subning"},Wn={class:"status-tag"},Xn=["onClick"],Zn={key:1,class:"status-tag running"},Kn={key:2,class:"status-tag complete"},es={class:"status-tag error"},ts=["onClick"],os={class:"zm-line1 reason-text"},as={key:4,class:"status-tag running"},ns={class:"status-tag warning"},ss={class:"reason-text"},ls=["onClick"],is={key:0},us={key:1},_s={key:0,class:"text-block"},rs={class:"time-content-box"},cs={key:0},ds={key:1},ps={key:2},ms={key:3},fs={key:4},vs={key:5,class:"ml4"},hs={key:6},gs=["onClick"],ys=A(()=>t("a",{class:"ml4 btn-hover-block"},"更新",-1)),ks={key:1},bs={key:0},ws={key:1},Cs=["onClick"],xs=["onClick"],Os=["onClick"],$s=A(()=>t("span",null,"删除",-1)),qs={class:"upload-file-box"},Ss={class:"select-card-box"},Fs=["onClick"],Ls={class:"card-title"},Ps={key:0,class:"card-switch-box"},Us={class:"card-desc"},Is={key:0,class:"card-switch"},Ts={__name:"knowledge-document",setup(d){const{setStorage:g}=ao("localStorage"),w=Xt(),{changeGraphSwitch:q}=w,m=Zt(),X=xe(()=>{var s;return((s=m.companyInfo)==null?void 0:s.neo4j_status)=="true"}),P=xe(()=>{var s;return((s=m.companyInfo)==null?void 0:s.ali_ocr_switch)=="1"}),z=dt(),S=[{key:2,title:"图文OCR解析",icon:"pdf-ocr",desc:"通过OCR文字识别提取pdf文件内容，可以兼容扫描件，但是解析速度较慢。"},{key:1,title:"纯文本解析",icon:"pdf-text",desc:"只提取pdf中的文字内容，如果文档为扫描件可能提取不到内容。"},{key:3,title:"图文解析",icon:"pdf-img",desc:"提取PDF文档中的图片和文字"},{key:4,title:"阿里云OCR解析",icon:"ali-ocr",desc:"通过阿里云文档智能接口解析提取图片和文字"}],F=Le(),f=Pe(),r=F.query,C=y(!1),N=y(null),U=y(null),M=y(!1),k=y({library_intro:"",library_name:"",use_model:"",is_offline:null,type:0});te({selectedRowKeys:[]});const x=te({use_model:"",model_config_id:""}),Z=(s,u)=>{let O=u.modelName,j=u.modelId;V.value.length>0?oe.confirm({title:`确定切换模型为${O}吗？`,content:"切换后，所有学习文档将自动重新学习。",onOk(){x.use_model=O,x.model_config_id=j,h()},onCancel(){}}):(x.use_model=O,x.model_config_id=j,h())},h=(s=!0,u=null)=>{uo({...Fe(k.value),use_model:x.use_model,model_config_id:x.model_config_id}).then(()=>{k.value.use_model=x.use_model,k.value.model_config_id=x.model_config_id,typeof u=="function"&&u(),s&&W.success("保存成功")})},l=y([]),H=s=>{l.value=s,v()},v=()=>{if(!k.value.id){setTimeout(()=>{v()},100);return}if(l.value.length>0&&!k.value.use_model){let s=null,u=null;for(let O of l.value)if(O.model_define==="chatwiki"){s=O;for(let j of s.children)if(j.name==="text-embedding-v2"){u=j;break}break}s||(s=l.value[0],u=s.children[0]),s&&(x.use_model=u.name,x.model_config_id=u.model_config_id,h(!1))}},V=y([]),Q=te({learned_err_count:0,learned_count:0,learned_wait_count:0}),I=te({library_id:r.id,file_name:void 0,status:"",page:1,size:10,total:0}),b=[{id:"",name:"全部"},{id:"4",name:"待学习"},{id:"8",name:"部分失败"},{id:"3",name:"全部失败"},{id:"2",name:"成功"}],ce=y([]),B=[{title:"文档名称",dataIndex:"file_name",key:"file_name",width:300},{title:"知识图谱",dataIndex:"graph_status",key:"graph_status",width:200},{title:"文档格式",dataIndex:"file_ext",key:"file_ext",width:100},{title:"文档大小",dataIndex:"file_size_str",key:"file_size",width:100},{title:"分段",dataIndex:"paragraph_count",key:"paragraph_count",width:120},{title:"更新频率/时间",dataIndex:"doc_auto_renew_frequency",key:"doc_auto_renew_frequency",width:260},{title:"知识图谱实体数",dataIndex:"graph_entity_count",key:"graph_entity_count",width:160},{title:"文档状态",dataIndex:"status",key:"status",width:200},{title:"更新时间",dataIndex:"update_time",key:"update_time",width:150},{title:"操作",dataIndex:"action",key:"action",fixed:"right",width:100}],He=s=>{ne()},ht=s=>{I.page=s.current,I.size=s.pageSize,Y()},ne=()=>{I.page=1,Y()};let Ee=!1;const gt=({id:s})=>{V.value.length==1&&(Ee=!0),io({id:s}).then(()=>{Ee&&I.page>1&&I.page--,Y(),W.success("删除成功")})},se=(s,u={})=>{if(s.status=="4")return f.push({path:"/library/document-segmentation",query:{document_id:s.id,page:I.page}});if(s.status=="3"&&k.value.type!=2)return W.error("学习失败,不可预览");if(s.status=="0")return W.error("转换中,稍候可预览");if(s.status=="1")return W.error("学习中,不可预览");if(s.status=="6")return W.error("获取中,不可预览");if(s.status=="7")return W.error("获取失败,不可预览");if(s.status=="10")return W.error("正在分段,不可预览");f.push({name:"libraryPreview",query:{id:s.id,...u}})},Y=()=>{let s=Fe(I);s.status==0&&(s.status=""),C.value=!0,Kt(s).then(u=>{let O=u.data.info;!x.use_model&&x.use_model!=O.use_model&&(x.use_model=O.use_model,x.model_config_id=O.model_config_id),k.value={...O},M.value=O.graph_switch==1,O.graph_switch=="0"||!X.value?ce.value=B.filter(J=>!["graph_status","graph_entity_count"].includes(J.key)):ce.value=B;let j=u.data.list||[],K=u.data.count_data||{};I.total=u.data.total,Q.learned_count=K.learned_count,Q.learned_err_count=K.learned_err_count,Q.learned_wait_count=K.learned_wait_count;let le=!1;V.value=j.map(J=>(["1","6","0","5"].includes(J.status)&&(le=!0),J.file_size_str=eo(J.file_size),J.update_time=ot(J.update_time*1e3).format("YYYY-MM-DD HH:mm"),J.doc_last_renew_time_desc=J.doc_last_renew_time>0?ot(J.doc_last_renew_time*1e3).format("YYYY-MM-DD HH:mm"):"--",J)),le&&yt(),!le&&clearInterval(de.value)}).finally(()=>{C.value=!1})},de=y(null),yt=()=>{clearInterval(de.value),de.value=setInterval(()=>{Y()},1e3*5)},Be=y(null),kt=s=>{if(l.value.length==0){oe.confirm({title:"请先到模型管理中添加嵌入模型？",content:"知识库学习需要使用到嵌入模型，请在系统管理-模型管理中添加。推荐使用通义千问、openai或者火山引擎的嵌入模型。",okText:"去添加",onOk(){f.push({path:"/user/model"})}});return}let{key:u}=s;u==1&&xt(),u==2&&bt(),u==3&&Be.value.add()},L=te({open:!1,urls:"",library_id:r.id,doc_auto_renew_frequency:1,confirmLoading:!1,doc_auto_renew_minute:"",rules:{urls:[{message:"请输入网页地址",required:!0},{validator:(s,u)=>st(u)===!1?Promise.reject(new Error("网页地址不合法")):Promise.resolve()}]}}),bt=()=>{L.open=!0,L.confirmLoading=!1,L.urls="",L.doc_auto_renew_minute="02:00",L.doc_auto_renew_frequency=1},Ve=y(null),wt=()=>{Ve.value.validate().then(()=>{L.confirmLoading=!0,ge({library_id:L.library_id,urls:JSON.stringify(st(L.urls)),doc_auto_renew_frequency:L.doc_auto_renew_frequency,doc_auto_renew_minute:ye(L.doc_auto_renew_minute),doc_type:2}).then(()=>{L.open=!1,L.confirmLoading=!1,ne()})}).catch(()=>{L.confirmLoading=!1})},Ct=()=>{L.open=!1},R=te({open:!1,fileList:[],confirmLoading:!1,pdf_parse_type:1}),je=xe(()=>R.fileList.filter(s=>s.type==="application/pdf").length>0),Ge=y(null),xt=()=>{if(k.value.type==2){Ge.value.show();return}R.fileList=[],R.open=!0},Ot=()=>{R.fileList=[]},$t=s=>{R.fileList=s},qt=()=>{if(N.value&&!z.getGuideLearningTips&&R.fileList.length>1&&N.value.show(),R.fileList.length==0){W.error("请选择文件");return}R.confirmLoading=!0;let s=new FormData;s.append("library_id",I.library_id);let u=!1;R.fileList.forEach(O=>{(O.name.includes(".xlsx")||O.name.includes(".csv"))&&(u=!0),s.append("library_files",O)}),je.value&&s.append("pdf_parse_type",R.pdf_parse_type),ge(s).then(O=>{Y(),R.open=!1,R.fileList=[],R.confirmLoading=!1,u&&O.data.file_ids.length==1&&f.push("/library/document-segmentation?document_id="+O.data.file_ids[0])}).catch(()=>{R.confirmLoading=!1})},Ae=y(null),St=s=>{Ae.value.show(s)},Ft=s=>{f.push({path:"/library/document-segmentation",query:{document_id:s.id}})},Qe=s=>{so({id:s.id}).then(()=>{Y()})},Lt=()=>{if(M.value){M.value=!1;let s={graph_model_config_id:k.value.graph_model_config_id,graph_use_model:k.value.graph_use_model};if((!s.graph_model_config_id||!s.graph_use_model)&&l.value.length>0){let O=l.value[0].children[0];s.graph_use_model=O.name,s.graph_model_config_id=O.model_config_id}U.value.show(s)}else k.value.graph_switch=0,h(!1,()=>{Y(),q(0)})},Pt=s=>{M.value=!0,k.value.graph_switch=1,k.value.graph_model_config_id=s.graph_model_config_id,k.value.graph_use_model=s.graph_use_model,h(!1,()=>{Y(),q(1)})},Ut=s=>{if(s.key==4&&!P.value)return!1;R.pdf_parse_type=s.key},It=()=>{window.open("#/user/aliocr")},Ye=y(null),Je=s=>{Ye.value.show({...s})},Tt=s=>{lo({id:s.id}).then(u=>{W.success("更新成功"),Y()})},Dt=s=>{oe.confirm({title:"取消确认？",content:"确认取消该文档解析",okText:"确定",onOk(){no({id:s.id}).then(u=>{W.success("取消成功"),Y()})}})},Rt=s=>{g("graph:autoOpenFileId",s.id),f.push({path:"/library/details/knowledge-graph",query:{id:r.id}})};return ro(()=>{r.page&&(I.page=+r.page),Y()}),co(()=>{de.value&&clearInterval(de.value)}),(s,u)=>{const O=ct,j=zo,K=Uo,le=Po,J=pt,We=Fo,Mt=Ho,ie=Re,Xe=De,Nt=we,zt=Bo,Ht=To,pe=Do,me=Vo,Ze=Ro,Et=Eo,Bt=At,fe=Te,Ke=ke,et=oe,Vt=jo,jt=vt,Gt=po("copy");return o(),i("div",Ba,[e(Bt,{scrollbar:!1},{default:a(()=>[t("div",Va,[t("div",ja,[t("div",Ga,[e(We,{trigger:["hover"],overlayClassName:"add-dropdown-btn"},{overlay:a(()=>[e(le,{onClick:kt},{default:a(()=>[(o(),D(K,{key:1},{default:a(()=>[t("div",Aa,[e(j,{class:"title-block",gap:4},{default:a(()=>[e(O,{name:"doc-icon"}),Qa]),_:1}),k.value.type==2?(o(),i("div",Ya," 上传本地 docx/csv/xlsx 等格式文件 ")):(o(),i("div",Ja," 上传本地 pdf/docx/txt/md/xlsx/csv/html 等格式文件 "))])]),_:1})),k.value.type!=2?(o(),D(K,{key:2},{default:a(()=>[t("div",Wa,[e(j,{class:"title-block",gap:4},{default:a(()=>[e(O,{name:"link-icon"}),Xa]),_:1}),Za])]),_:1})):_("",!0),(o(),D(K,{key:3},{default:a(()=>[t("div",Ka,[e(j,{class:"title-block",gap:4},{default:a(()=>[e(O,{name:"cu-doc-icon"}),en]),_:1}),tn])]),_:1}))]),_:1})]),default:a(()=>[e(J,{type:"primary"},{icon:a(()=>[e(T(Lo))]),default:a(()=>[on]),_:1})]),_:1})]),nt(e(j,{align:"center",class:"tool-item custom-select-box"},{default:a(()=>[an,e(ho,{modelType:"TEXT EMBEDDING",isOffline:!1,modeName:x.use_model,modeId:x.model_config_id,style:{width:"240px"},onChange:Z,onLoaded:H},null,8,["modeName","modeId"])]),_:1},512),[[mo,!1]]),X.value?(o(),D(j,{key:0,align:"center",class:"tool-item custom-select-box pd-5-8"},{default:a(()=>[nn,e(Mt,{checked:M.value,"onUpdate:checked":u[0]||(u[0]=p=>M.value=p),onChange:Lt,"checked-children":"开","un-checked-children":"关"},null,8,["checked"])]),_:1})):_("",!0)]),t("div",sn,[k.value.type==0?(o(),i("div",ln,[t("div",un,[_n,t("div",rn,$(Q.learned_count),1)]),t("div",cn,[dn,t("div",pn,$(Q.learned_wait_count),1)]),t("div",mn,[fn,t("div",vn,$(Q.learned_err_count),1)])])):_("",!0),k.value.type==0?(o(),i("div",hn,[e(Xe,{value:I.status,"onUpdate:value":u[1]||(u[1]=p=>I.status=p),style:{width:"150px"},placeholder:"请选择",onChange:He},{default:a(()=>[(o(),i(E,null,re(b,p=>e(ie,{key:p.id,value:p.id},{default:a(()=>[c($(p.name),1)]),_:2},1032,["value"])),64))]),_:1},8,["value"])])):_("",!0),t("div",gn,[e(Nt,{style:{width:"282px"},value:I.file_name,"onUpdate:value":u[2]||(u[2]=p=>I.file_name=p),placeholder:"请输入文档名称搜索",onChange:ne},{suffix:a(()=>[e(T(Io),{onClick:ne,style:{color:"rgba(0, 0, 0, 0.25)"}})]),_:1},8,["value"])])])]),k.value.type==0?(o(),D(Co,{key:0,style:{"margin-bottom":"16px"},title:"使用说明"},{default:a(()=>[yn]),_:1})):_("",!0),t("div",kn,[e(Et,{columns:ce.value,"data-source":V.value,scroll:{x:1e3},"row-key":"id",pagination:{current:I.page,total:I.total,pageSize:I.size,showQuickJumper:!0,showSizeChanger:!0,pageSizeOptions:["10","20","50","100"]},onChange:ht},{bodyCell:a(({column:p,record:n})=>[p.key==="file_name"?(o(),i("div",bn,[n.doc_type==2?(o(),D(zt,{key:0,title:null},{content:a(()=>[c(" 原链接："),t("a",{href:n.doc_url,target:"_blank"},$(n.doc_url),9,wn),nt(e(T(Me),{style:{"margin-left":"4px",cursor:"pointer"}},null,512),[[Gt,`${n.doc_url}`]])]),default:a(()=>[t("a",{onClick:G=>se(n)},[["5","6","7"].includes(n.status)?(o(),i("span",xn,$(n.doc_url),1)):(o(),i("span",On,$(n.file_name),1))],8,Cn)]),_:2},1024)):(o(),i("a",{key:1,onClick:G=>se(n)},[["5","6","7"].includes(n.status)?(o(),i("span",qn,$(n.doc_url),1)):(o(),i("span",Sn,$(n.file_name),1))],8,$n)),n.doc_type==2&&n.remark?(o(),i("div",Fn," 备注："+$(n.remark),1)):_("",!0)])):_("",!0),p.key==="graph_entity_count"?(o(),i("a",{key:1,onClick:G=>Rt(n)},$(n.graph_entity_count),9,Ln)):_("",!0),p.key==="status"?(o(),i(E,{key:2},[n.file_ext=="pdf"&&n.pdf_parse_type>=2?(o(),i(E,{key:0},[n.status==0?(o(),i("div",Pn,[t("div",Un,[t("span",In,[e(T(to)),c("文档解析中")]),t("a",{onClick:G=>Dt(n)},"取消",8,Tn)]),t("div",Dn,[e(Ht,{size:"small",class:"progress-bar-box",percent:parseInt(n.ocr_pdf_index/n.ocr_pdf_total*100),"show-info":!1},null,8,["percent"]),t("div",Rn,$(n.ocr_pdf_index)+" / "+$(n.ocr_pdf_total),1)])])):_("",!0)],64)):(o(),i(E,{key:1},[n.status==0?(o(),i("span",Mn,[e(pe,{size:"small"}),c(" 转换中")])):_("",!0)],64)),n.status==1?(o(),i("span",Nn,[e(pe,{size:"small"}),c(" 学习中")])):_("",!0),n.status==2?(o(),i("span",zn,[e(T(Ce)),c(" 学习完成")])):_("",!0),n.status==3?(o(),D(me,{key:4,placement:"top"},{title:a(()=>[t("span",null,$(n.errmsg),1)]),default:a(()=>[t("span",null,[t("span",Hn,[e(T(ve)),c(" 转换失败")]),k.value.type==2?(o(),i("a",{key:0,class:"ml8",onClick:G=>se(n)},"学习",8,En)):_("",!0)])]),_:2},1024)):_("",!0),n.status==8?(o(),D(me,{key:5,placement:"top"},{title:a(()=>[t("span",null,$(n.errmsg),1)]),default:a(()=>[t("span",null,[t("span",Bn,[e(T(ve)),c(" 转化异常")])])]),_:2},1024)):_("",!0),n.status==4?(o(),i(E,{key:6},[t("span",Vn,[e(T($e)),c(" 待学习")]),t("a",{class:"ml8",onClick:G=>se(n)},"学习",8,jn)],64)):_("",!0),n.status==5?(o(),i("span",Gn,[e(T($e)),c(" 待获取")])):_("",!0),n.status==6?(o(),i("span",An,[e(pe,{size:"small"}),c(" 获取中")])):_("",!0),n.status==7?(o(),D(me,{key:9,placement:"top"},{title:a(()=>[t("span",null,$(n.errmsg),1)]),default:a(()=>[t("span",Qn,[e(T(ve)),c(" 获取失败")])]),_:2},1024)):_("",!0),n.status==9?(o(),i("span",Yn,[e(T(oo)),c(" 取消解析")])):_("",!0),n.status==10?(o(),i("span",Jn,[e(pe,{size:"small"}),c(" 正在分段 ")])):_("",!0)],64)):_("",!0),p.key==="graph_status"?(o(),i(E,{key:3},[n.graph_status==0?(o(),i(E,{key:0},[t("span",Wn,[e(T($e)),c(" 待生成")]),t("a",{class:"ml8",onClick:G=>Qe(n)},"生成",8,Xn)],64)):n.graph_status==1?(o(),i("span",Zn,[e(T(Ne)),c(" 排队中")])):n.graph_status==2?(o(),i("span",Kn,[e(T(Ce)),c(" 生成完成")])):n.graph_status==3?(o(),i(E,{key:3},[t("span",es,[e(T(ve)),c(" 生成失败")]),t("a",{class:"ml8",onClick:G=>Qe(n)},"生成",8,ts),n.graph_err_msg?(o(),D(me,{key:0,title:n.graph_err_msg},{default:a(()=>[t("div",os,"原因："+$(n.graph_err_msg),1)]),_:2},1032,["title"])):_("",!0)],64)):n.graph_status==4?(o(),i("span",as,[e(pe,{size:"small"}),c(" 生成中")])):n.graph_status==5?(o(),i(E,{key:5},[t("span",ns,[e(T(Ce)),c(" 部分成功")]),t("div",ss,[c(" 失败数："+$(n.graph_err_count||0)+" ",1),t("a",{class:"ml8",onClick:G=>se(n,{graph_status:3})},"详情",8,ls)])],64)):_("",!0)],64)):_("",!0),p.key==="file_size"?(o(),i(E,{key:4},[n.doc_type==3?(o(),i("span",is,"-")):(o(),i("span",us,$(n.file_size_str),1))],64)):_("",!0),p.key==="doc_auto_renew_frequency"?(o(),i(E,{key:5},[n.doc_type==2?(o(),i("div",_s,[t("div",rs,[n.doc_auto_renew_frequency==1?(o(),i("span",cs,"不自动更新")):_("",!0),n.doc_auto_renew_frequency==2?(o(),i("span",ds,"每天")):_("",!0),n.doc_auto_renew_frequency==3?(o(),i("span",ps,"每3天")):_("",!0),n.doc_auto_renew_frequency==4?(o(),i("span",ms,"每7天")):_("",!0),n.doc_auto_renew_frequency==5?(o(),i("span",fs,"每30天")):_("",!0),n.doc_auto_renew_frequency>1&&n.doc_auto_renew_minute>0?(o(),i("span",vs,$(T(ye)(n.doc_auto_renew_minute)),1)):_("",!0),n.doc_auto_renew_frequency>1?(o(),i("span",hs,"更新")):_("",!0),t("a",{class:"ml4 btn-hover-block",onClick:G=>Je(n)},"修改",8,gs)]),e(j,{align:"center"},{default:a(()=>[c(" 最近更新: "+$(n.doc_last_renew_time_desc)+" ",1),e(Ze,{title:"确认更新?",onConfirm:G=>Tt(n)},{default:a(()=>[ys]),_:2},1032,["onConfirm"])]),_:2},1024)])):(o(),i("div",ks,"--"))],64)):_("",!0),p.key==="paragraph_count"?(o(),i(E,{key:6},[n.status==0||n.status==1?(o(),i("span",bs,"-")):(o(),i("span",ws,$(n.paragraph_count),1))],64)):_("",!0),p.key==="action"?(o(),D(j,{key:7,gap:8},{default:a(()=>[e(me,null,{title:a(()=>[c("重新分段")]),default:a(()=>[e(T(Mo),{class:"btn-hover-block",onClick:G=>Ft(n)},null,8,["onClick"])]),_:2},1024),e(We,null,{overlay:a(()=>[e(le,null,{default:a(()=>[n.doc_type==2?(o(),D(K,{key:0},{default:a(()=>[t("div",{onClick:G=>Je(n)},"编辑",8,Cs)]),_:2},1024)):_("",!0),e(K,{disabled:n.status==6||n.status==7||n.status==0},{default:a(()=>[t("div",{onClick:G=>se(n)},"预览",8,xs)]),_:2},1032,["disabled"]),e(K,null,{default:a(()=>[t("div",{onClick:G=>St(n)},"重命名",8,Os)]),_:2},1024),e(K,null,{default:a(()=>[e(Ze,{title:"确定要删除吗?",onConfirm:G=>gt(n)},{default:a(()=>[$s]),_:2},1032,["onConfirm"])]),_:2},1024)]),_:2},1024)]),default:a(()=>[t("div",{class:"table-btn",onClick:u[3]||(u[3]=Oe(()=>{},["prevent"]))},[e(T(No),{class:"btn-hover-block"})])]),_:2},1024)]),_:2},1024)):_("",!0)]),_:1},8,["columns","data-source","pagination"])])]),_:1}),e(et,{open:R.open,"onUpdate:open":u[5]||(u[5]=p=>R.open=p),"confirm-loading":R.confirmLoading,maskClosable:!1,title:"上传文档",onOk:qt,onCancel:Ot,width:"740px"},{default:a(()=>[e(Ke,{class:"mt24"},{default:a(()=>[e(fe,{required:"",label:""},{default:a(()=>[t("div",qs,[e(ft,{type:k.value.type,maxCount:20,value:R.fileList,"onUpdate:value":u[4]||(u[4]=p=>R.fileList=p),onChange:$t},null,8,["type","value"])])]),_:1}),je.value?(o(),D(fe,{key:0,required:"",label:"PDF解析模式",class:"select-card-main"},{default:a(()=>[t("div",Ss,[(o(),i(E,null,re(S,p=>t("div",{key:p.key,class:mt(["select-card-item",{active:R.pdf_parse_type==p.key},{disabled:p.key==4&&!P.value}]),onClick:Oe(n=>Ut(p),["stop"])},[e(O,{class:"check-arrow",name:"check-arrow-filled"}),t("div",Ls,[e(O,{name:p.icon,style:{"font-size":"16px"}},null,8,["name"]),c(" "+$(p.title)+" ",1),p.key==4&&!P.value?(o(),i("div",Ps,"未开启")):_("",!0)]),t("div",Us,$(p.desc),1),p.key==4&&!P.value?(o(),i("div",Is,[c(" 未开启阿里云OCR "),t("div",{class:"card-switch-btn",onClick:Oe(It,["stop"])},"去开启")])):_("",!0)],10,Fs)),64))])]),_:1})):_("",!0)]),_:1})]),_:1},8,["open","confirm-loading"]),e(Pa,{onOk:Y,ref_key:"qaUploadModalRef",ref:Ge},null,512),e(et,{open:L.open,"onUpdate:open":u[9]||(u[9]=p=>L.open=p),"confirm-loading":L.confirmLoading,maskClosable:!1,title:"添加在线数据",width:"746px",onOk:wt,onCancel:Ct},{default:a(()=>[e(Ke,{class:"url-add-form",layout:"vertical",ref_key:"urlFormRef",ref:Ve,model:L,rules:L.rules},{default:a(()=>[e(fe,{name:"urls",label:"网页链接"},{default:a(()=>[e(Vt,{style:{height:"120px"},value:L.urls,"onUpdate:value":u[6]||(u[6]=p=>L.urls=p),placeholder:"请输入网页链接,形式：一行标题一行网页链接"},null,8,["value"])]),_:1}),e(fe,{name:"doc_auto_renew_frequency",label:"更新频率",required:""},{default:a(()=>[e(Xe,{value:L.doc_auto_renew_frequency,"onUpdate:value":u[7]||(u[7]=p=>L.doc_auto_renew_frequency=p),style:{width:"100%"}},{default:a(()=>[e(ie,{value:1},{default:a(()=>[c("不自动更新")]),_:1}),e(ie,{value:2},{default:a(()=>[c("每天")]),_:1}),e(ie,{value:3},{default:a(()=>[c("每3天")]),_:1}),e(ie,{value:4},{default:a(()=>[c("每7天")]),_:1}),e(ie,{value:5},{default:a(()=>[c("每30天")]),_:1})]),_:1},8,["value"])]),_:1}),L.doc_auto_renew_frequency>1?(o(),D(fe,{key:0,name:"doc_auto_renew_minute",label:"更新时间"},{default:a(()=>[e(jt,{valueFormat:"HH:mm",value:L.doc_auto_renew_minute,"onUpdate:value":u[8]||(u[8]=p=>L.doc_auto_renew_minute=p),format:"HH:mm"},null,8,["value"])]),_:1})):_("",!0)]),_:1},8,["model","rules"])]),_:1},8,["open","confirm-loading"]),e(na,{libraryInfo:k.value,onOk:ne,ref_key:"addCustomDocumentRef",ref:Be},null,8,["libraryInfo"]),e(wo,{onOk:ne,ref_key:"renameModalRef",ref:Ae},null,512),e(go,{onOk:Pt,ref_key:"openGrapgModalRef",ref:U},null,512),e(Ha,{ref_key:"guideLearningTipsRef",ref:N},null,512),e(Ea,{onOk:Y,ref_key:"editOnlineDocRef",ref:Ye},null,512)])}}},ti=be(Ts,[["__scopeId","data-v-8e20bb5d"]]);export{ti as default};
