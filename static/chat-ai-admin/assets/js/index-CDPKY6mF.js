import{A as x,b as C,l as F,h as z,Q as D,k as h,S as I,T as L,U as P}from"../../index-CuFzRDH0.js";import{k as p,e as c,M as v,N as w,u as g,a7 as V,W as a,a6 as B,Z as N,a1 as j,a2 as A}from"./vue-chunks-DkYK5AuX.js";import{_ as T}from"./index-D2ta3gNn.js";import"./axios-Cm0UX6qg.js";import"./qs-g-qVsYXK.js";import"./crypto-js-CsNcoEfj.js";import"./dayjs-CHX5mXCJ.js";import"./FormItemContext-CG4o3aCY.js";var q={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M523.8 191.4v288.9h382V128.1zm0 642.2l382 62.2v-352h-382zM120.1 480.2H443V201.9l-322.9 53.5zm0 290.4L443 823.2V543.8H120.1z"}}]},name:"windows",theme:"filled"};const E=q;function S(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?Object(arguments[t]):{},i=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable}))),i.forEach(function(s){M(e,s,n[s])})}return e}function M(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _=function(t,n){var i=S({},t,n.attrs);return p(x,S({},i,{icon:E}),null)};_.displayName="WindowsFilled";_.inheritAttrs=!1;const H=_,R="/assets/img/client-download-pic-D_c9zEa_.png",r=e=>(j("data-v-79e137f6"),e=e(),A(),e),U={class:"client-download-page"},$={key:0,class:"login-required-switch"},Q=r(()=>a("span",null,"需要登录：",-1)),Z=r(()=>a("h3",{class:"page-title"},"客户端下载",-1)),G={class:"page-body"},J={class:"app-info"},X=r(()=>a("div",{class:"app-name"},"ChatWiki电脑客户端",-1)),Y={class:"banner"},K=r(()=>a("img",{src:R,alt:""},null,-1)),ee={__name:"index",setup(e){const t=F();let{role_type:n}=t;const{t:i}=z(),s=c(!1),b=()=>{D({client_side_login_switch:s.value?1:0}).then(()=>{h.success(i("common.saveSuccess"))})},k=c(""),d=c("Windows下载"),l=c(!1);let u=null;const m=()=>P({domain:""}).then(o=>(o.data.file_url?(l.value=!1,d.value="Windows下载",k.value=o.data.file_url,clearTimeout(u),u=null):(d.value="打包中...",l.value=!0,u=setTimeout(()=>{m()},5e3)),o)),W=()=>{l.value||m().then(o=>{o.data.file_url?I("",o.data.file_url):h.error("下载文件还没有准备好")})};return(()=>{L().then(o=>{s.value=o.data.client_side_login_switch==1})})(),(o,f)=>{const y=T;return v(),w("div",U,[g(n)!="3"?(v(),w("div",$,[Q,p(y,{checked:s.value,"onUpdate:checked":f[0]||(f[0]=O=>s.value=O),onChange:b},null,8,["checked"])])):V("",!0),Z,a("div",G,[a("div",J,[X,a("div",Y,[K,a("div",{class:B(["download-btn",{disabled:l.value}]),onClick:W},[p(g(H),{class:"windows-icon"}),a("span",null,N(d.value),1)],2)])])])])}}},de=C(ee,[["__scopeId","data-v-79e137f6"]]);export{de as default};
