import{_ as R}from"./cu-scroll-Bo1cIjk3.js";import{i as V,e as $,f as F}from"./index-4WikwaS0.js";import{A as U}from"./add-collaborator-91QrM6ZG.js";import{b as z,dC as J,B as L,M as P,k as S,E as B}from"../../index-uZrSGPJ2.js";import{a4 as Q,e as d,B as W,Q as x,S as p,N as e,W as o,k as a,M as s,a7 as i,l as Y,u as _,Y as Z,Z as D,F as C,a1 as G,a2 as H}from"./vue-chunks-Dagx-vSq.js";import{P as K}from"./PlusOutlined-C4d6M8_0.js";import{A as X}from"./index-DTwPrTpn.js";import{U as E}from"./UserOutlined-DJfTsEQ-.js";import{D as tt}from"./DownOutlined-CJyYwwtm.js";import{C as j}from"./CheckOutlined-l1N7JgI5.js";import{E as et}from"./EditOutlined-BJnn9Hwf.js";import{E as ot}from"./Password-DhHqQ7fn.js";import{a as st}from"./index-ByxtaxSL.js";import{_ as it}from"./index-BFCa7S14.js";import"./pull-up.esm-D94Swpvl.js";import"./observe-dom.esm-CyCedSm-.js";import"./index-BuYscfp6.js";import"./Trigger-DoXVYhN4.js";import"./ResizeObserver.es-B1PUzC5B.js";import"./isPlainObject-CAcuZItg.js";import"./responsiveObserve-FU3Dn2XC.js";import"./collapseMotion-D5mGic4t.js";import"./index-EWP4miKO.js";import"./colors-Bq--hzfJ.js";import"./QuestionCircleOutlined-DaqtyhFd.js";import"./FormItemContext-Cs8-ygLw.js";import"./index-BZeZ1Fpr.js";import"./RadioButton-B7NLGGfS.js";import"./Checkbox-SbuG5kqh.js";import"./index-DvpvmHbh.js";import"./index-BQH61rer.js";import"./axios-BZ84_VUH.js";import"./qs-CSiAN3u4.js";import"./crypto-js-DN0vhd75.js";import"./dayjs-CZ5VaChI.js";import"./index-BIs6ICi9.js";import"./index-Dcu1AEuu.js";import"./useMaxLevel-G_tCMKFf.js";import"./index-CbTVyCU8.js";import"./index-CJgvF6wP.js";import"./slide-BIPMUmGB.js";import"./SearchOutlined--FowkdKA.js";import"./move-Cj-Coe07.js";import"./CaretDownFilled-DFwBTbBj.js";import"./Input-CkgxEQH_.js";import"./inputProps-CFzerOIV.js";import"./css-DbBMd65r.js";import"./fromPairs-Dx9PT-t0.js";import"./index-CM4FzrBV.js";import"./LeftOutlined-q_SFvfQo.js";import"./RightOutlined-BOG0y4Nw.js";import"./index-o3ZFs3wF.js";import"./dropdown-DE5F1xap.js";import"./index-DGr8yI5G.js";import"./shallowequal-CI97GdPH.js";import"./CaretDownOutlined-BrBGZpG7.js";import"./index-Jtlfy8YK.js";import"./Search-B1xKt77Y.js";import"./TextArea-CjFwG0DD.js";const r=l=>(G("data-v-931394c9"),l=l(),H(),l),at={class:"content-box"},nt=r(()=>o("div",{class:"page-title"},"权限管理",-1)),_t={key:0,class:"add-btn-block"},ct={class:"list-content"},rt={key:0,class:"user-block"},pt={class:"name-box"},lt={class:"name"},mt={class:"remark-text"},dt={key:0,class:"hover-btn-box"},ut={key:0},ht={key:1},yt={key:2},kt={key:1,class:"hover-btn-box"},vt={class:"role-menu-box"},bt=["onClick"],ft={class:"menu-header"},gt=r(()=>o("span",{class:"title"},"管理",-1)),xt=r(()=>o("div",{class:"desc"},"可编辑，可删除，可查看",-1)),Ct={key:0,class:"check-box"},jt=["onClick"],Ot={class:"menu-header"},It=r(()=>o("span",{class:"title"},"编辑",-1)),Pt=r(()=>o("div",{class:"desc"},"可编辑，可查看",-1)),St={key:0,class:"check-box"},Bt=["onClick"],Dt={class:"menu-header"},Et=r(()=>o("span",{class:"title"},"查看",-1)),Mt=r(()=>o("div",{class:"desc"},"仅查看",-1)),Nt={key:0,class:"check-box"},Tt={class:"hover-btn-box"},wt={key:0},At={key:1},qt={key:2},Rt=["onClick"],Vt={__name:"index",setup(l){const u=Q().query,h=d(J(u.form_id)),y=d([]),M=W({object_id:u.form_id,object_type:3}),m=()=>{V({...M}).then(n=>{let c=n.data||[];y.value=c})};m();const O=d(null),N=()=>{O.value.show(y.value,[{object_id:+u.form_id,object_type:3,operate_rights:4}])},k=(n,c)=>{let v=c==4?"管理":c==2?"编辑":"查看";P.confirm({title:"提示?",icon:a(B),content:"确认修改该协作者权限为【"+v+"】",okText:"确认",cancelText:"取消",onOk:()=>{let b=[{object_id:+n.object_id,object_type:+n.object_type,operate_rights:+c}];$({identity_ids:n.identity_id,identity_type:n.identity_type,object_array:JSON.stringify(b)}).then(I=>{S.success("修改成功"),m()})},onCancel(){}})},T=n=>{P.confirm({title:"提示?",icon:a(B),content:"确认删除该条数据",okText:"确认",okType:"danger",cancelText:"取消",onOk:()=>{F({identity_id:n.identity_id,identity_type:n.identity_type,object_id:n.object_id,object_type:n.object_type}).then(c=>{S.success("删除成功"),m()})},onCancel(){}})},w=d([{title:"姓名",dataIndex:"name",key:"name"},{title:"权限",dataIndex:"operate_rights",key:"operate_rights"},{title:"操作",dataIndex:"action",key:"action",width:80}]);return(n,c)=>{const v=L,b=X,I=it,A=st,q=R;return e(),x(q,null,{default:p(()=>[o("div",at,[nt,h.value==4?(e(),s("div",_t,[a(v,{type:"primary",onClick:N,icon:Y(_(K))},{default:p(()=>[Z("添加协助者")]),_:1},8,["icon"])])):i("",!0),o("div",ct,[a(A,{columns:w.value,"data-source":y.value,pagination:!1},{bodyCell:p(({column:f,record:t})=>[f.key==="name"?(e(),s("div",rt,[a(b,{shape:"square",src:t.avatar,size:40},{icon:p(()=>[t.avatar?i("",!0):(e(),x(_(E),{key:0}))]),_:2},1032,["src"]),o("div",pt,[o("div",lt,D(t.user_name),1),o("div",mt,D(t.name),1)])])):i("",!0),f.key==="operate_rights"?(e(),s(C,{key:1},[h.value==2?(e(),s("div",dt,[t.operate_rights==4?(e(),s("span",ut,"管理")):i("",!0),t.operate_rights==2?(e(),s("span",ht,"编辑")):i("",!0),t.operate_rights==1?(e(),s("span",yt,"查看")):i("",!0)])):t.role_type==1||t.is_creator==1?(e(),s("div",kt,"管理")):(e(),x(I,{key:2,placement:"bottomRight",title:null,overlayInnerStyle:{padding:"2px"}},{content:p(()=>[o("div",vt,[o("div",{class:"role-menu",onClick:g=>k(t,4)},[o("div",ft,[a(_(E)),gt]),xt,t.operate_rights==4?(e(),s("div",Ct,[a(_(j))])):i("",!0)],8,bt),o("div",{class:"role-menu",onClick:g=>k(t,2)},[o("div",Ot,[a(_(et)),It]),Pt,t.operate_rights==2?(e(),s("div",St,[a(_(j))])):i("",!0)],8,jt),o("div",{class:"role-menu",onClick:g=>k(t,1)},[o("div",Dt,[a(_(ot)),Et]),Mt,t.operate_rights==1?(e(),s("div",Nt,[a(_(j))])):i("",!0)],8,Bt)])]),default:p(()=>[o("div",Tt,[t.operate_rights==4?(e(),s("span",wt,"管理")):i("",!0),t.operate_rights==2?(e(),s("span",At,"编辑")):i("",!0),t.operate_rights==1?(e(),s("span",qt,"查看")):i("",!0),a(_(tt))])]),_:2},1024))],64)):i("",!0),f.key==="action"?(e(),s(C,{key:2},[h.value==4?(e(),s(C,{key:0},[t.role_type!=1&&t.is_creator!=1?(e(),s("a",{key:0,onClick:g=>T(t)},"移除",8,Rt)):i("",!0)],64)):i("",!0)],64)):i("",!0)]),_:1},8,["columns","data-source"])])]),a(U,{onOk:m,ref_key:"addCollaboratorRef",ref:O},null,512)]),_:1})}}},Le=z(Vt,[["__scopeId","data-v-931394c9"]]);export{Le as default};
