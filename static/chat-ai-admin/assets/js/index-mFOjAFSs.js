import{I as x,b as C,l as I,f as z,ag as D,ah as L,k as h,ai as P,aj as V}from"../../index-BYXP5-K6.js";import{k as p,e as c,M as v,a7 as j,W as o,u as w,a6 as B,Z as F,a1 as N,a2 as q,N as g}from"./vue-chunks-DKljrDvA.js";import{_ as E}from"./index-CSLFuo_b.js";import"./axios-BZ84_VUH.js";import"./qs-DB0tj3pA.js";import"./crypto-js-fJpLWOEv.js";import"./dayjs-BpZi_McX.js";import"./FormItemContext-BbeLgxF6.js";var M={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M523.8 191.4v288.9h382V128.1zm0 642.2l382 62.2v-352h-382zM120.1 480.2H443V201.9l-322.9 53.5zm0 290.4L443 823.2V543.8H120.1z"}}]},name:"windows",theme:"filled"};function b(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?Object(arguments[t]):{},i=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable}))),i.forEach(function(a){T(e,a,n[a])})}return e}function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _=function(t,n){var i=b({},t,n.attrs);return p(x,b({},i,{icon:M}),null)};_.displayName="WindowsFilled";_.inheritAttrs=!1;const A="/assets/img/client-download-pic-D_c9zEa_.png",r=e=>(N("data-v-ab1de799"),e=e(),q(),e),H={class:"client-download-page"},R={key:0,class:"login-required-switch"},U=r(()=>o("span",null,"需要登录：",-1)),Z=r(()=>o("h3",{class:"page-title"},"客户端下载",-1)),$={class:"page-body"},G={class:"app-info"},J=r(()=>o("div",{class:"app-name"},"ChatWiki电脑客户端",-1)),Q={class:"banner"},X=r(()=>o("img",{src:A,alt:""},null,-1)),Y={__name:"index",setup(e){const t=I();let{role_type:n}=t;const{t:i}=z(),a=c(!1),S=()=>{V({client_side_login_switch:a.value?1:0}).then(()=>{h.success(i("common.saveSuccess"))})},k=c(""),d=c("Windows下载"),l=c(!1);let u=null;const m=()=>P({domain:""}).then(s=>(s.data.file_url?(l.value=!1,d.value="Windows下载",k.value=s.data.file_url,clearTimeout(u),u=null):(d.value="打包中...",l.value=!0,u=setTimeout(()=>{m()},5e3)),s)),y=()=>{l.value||m().then(s=>{s.data.file_url?L("",s.data.file_url):h.error("下载文件还没有准备好")})};return(()=>{D().then(s=>{a.value=s.data.client_side_login_switch==1})})(),(s,f)=>{const O=E;return g(),v("div",H,[w(n)!="3"?(g(),v("div",R,[U,p(O,{checked:a.value,"onUpdate:checked":f[0]||(f[0]=W=>a.value=W),onChange:S},null,8,["checked"])])):j("",!0),Z,o("div",$,[o("div",G,[J,o("div",Q,[X,o("div",{class:B(["download-btn",{disabled:l.value}]),onClick:y},[p(w(_),{class:"windows-icon"}),o("span",null,F(d.value),1)],2)])])])])}}},ce=C(Y,[["__scopeId","data-v-ab1de799"]]);export{ce as default};
