import{C as E}from"./cu-scroll-8SQNC6_m.js";import{b as M,W as P,bf as U,M as L,E as z,X as F,a2 as W,Z}from"../../index-CuFzRDH0.js";import{S as J}from"./index-YK7vZYdC.js";import{e as u,M as o,N as e,k as a,S as p,W as s,F as _,$ as x,a6 as Q,Z as c,Q as k,Y as v,u as y,a7 as i,l as T,a1 as X,a2 as Y}from"./vue-chunks-DkYK5AuX.js";import{D as q}from"./DownOutlined-xHwfZhzl.js";import{U as A}from"./UpOutlined-CmeybyPL.js";import{_ as K}from"./index-DVObnatt.js";const R=h=>(X("data-v-aef34bc0"),h=h(),Y(),h),tt={class:"prompt-wrapper"},st={class:"group-box"},ot=R(()=>s("div",{class:"main-title"},"导入提示词",-1)),et={class:"group-list-box"},ct=["onClick"],rt={class:"group-name"},nt={class:"name-text"},it={class:"content-box"},at={key:0,class:"loading-box"},lt={class:"prompt-list-box"},dt={class:"prompt-header"},pt={class:"prompt-title"},_t={key:0,class:"prompt-type diy"},ut={key:1,class:"prompt-type"},vt={class:"title"},ht={class:"right-btn-box"},mt=["onClick"],kt=["onClick"],yt={class:"prompt-content-box"},bt={key:0,class:"prompt-content"},gt=["onClick"],ft={key:1,class:"structure-list-box"},Ct={class:"structure-list"},xt={class:"structure-title"},It={class:"structure-content"},Ht={class:"structure-list"},St={class:"structure-title"},Lt={class:"structure-content"},jt=["onClick"],wt={class:"structure-list"},Nt={class:"structure-title"},Ot={class:"structure-content"},$t={class:"structure-list"},Bt={class:"structure-title"},Gt={class:"structure-content"},Vt={class:"structure-list"},Dt={class:"structure-title"},Et={class:"structure-content"},Mt={class:"structure-title"},Pt={class:"structure-content"},Ut={__name:"index",emits:["ok"],setup(h,{expose:j,emit:w}){const m=u(!1),N=w,O=()=>{m.value=!0},$=r=>{L.confirm({title:"导入确认",icon:T(z),content:"确定将该条提示导入",onOk(){N("ok",r),m.value=!1},onCancel(){}})},b=u(-1),I=u([]);(()=>{F().then(r=>{I.value=[{id:-1,group_name:"全部"},{id:0,group_name:"默认分组"},...r.data]})})();const B=r=>{b.value=r.id,H()},g=u([]),f=u(!1),H=()=>{f.value=!0,W({group_id:b.value,page:1,size:9999}).then(r=>{let l=r.data.list||[];l=l.map(d=>({...d,isHide:!0,prompt_struct:d.prompt_struct?JSON.parse(d.prompt_struct):{}})),g.value=l}).finally(()=>{f.value=!1})};H();const C=r=>{r.isHide=!r.isHide};return j({show:O}),(r,l)=>{const d=K,S=E,G=J,V=Z,D=L;return o(),e("div",null,[a(D,{open:m.value,"onUpdate:open":l[0]||(l[0]=t=>m.value=t),title:null,width:950,footer:null,wrapClassName:"add-prommpt-modal"},{default:p(()=>[s("div",tt,[s("div",st,[ot,a(S,{style:{height:"480px"}},{default:p(()=>[s("div",et,[(o(!0),e(_,null,x(I.value,t=>(o(),e("div",{class:Q(["group-list",{active:t.id==b.value}]),onClick:n=>B(t),key:t.id},[s("div",rt,[s("div",nt,c(t.group_name),1),t.group_desc?(o(),k(d,{key:0},{title:p(()=>[v(c(t.group_desc),1)]),default:p(()=>[a(y(P))]),_:2},1024)):i("",!0)])],10,ct))),128))])]),_:1})]),s("div",it,[a(S,{style:{padding:"0 24px"}},{default:p(()=>[f.value?(o(),e("div",at,[a(G)])):i("",!0),s("div",lt,[(o(!0),e(_,null,x(g.value,t=>(o(),e("div",{class:"prompt-list",key:t.id},[s("div",dt,[s("div",pt,[t.prompt_type==0?(o(),e("div",_t,"自定义")):i("",!0),t.prompt_type==1?(o(),e("div",ut,"结构化")):i("",!0),s("div",vt,c(t.title),1)]),s("div",ht,[a(d,{title:t.isHide?"展开":"收起"},{default:p(()=>[s("div",{class:"hover-btn-box",onClick:n=>C(t)},[t.isHide?(o(),k(y(q),{key:0})):(o(),k(y(A),{key:1}))],8,mt)]),_:2},1032,["title"]),s("div",{class:"hover-btn-box primary",onClick:n=>$(t)},[a(y(U)),v("导入 ")],8,kt)])]),s("div",yt,[t.prompt_type==0?(o(),e("div",bt,[t.isHide?(o(),e(_,{key:0},[v(c(t.prompt.slice(0,200))+" ",1),t.prompt.length>200?(o(),e("span",{key:0,onClick:n=>C(t),style:{cursor:"pointer"}},"...",8,gt)):i("",!0)],64)):(o(),e(_,{key:1},[v(c(t.prompt),1)],64))])):(o(),e("div",ft,[s("div",Ct,[s("div",xt,c(t.prompt_struct.role.subject),1),s("div",It,c(t.prompt_struct.role.describe),1)]),s("div",Ht,[s("div",St,c(t.prompt_struct.task.subject),1),s("div",Lt,[v(c(t.prompt_struct.task.describe)+" ",1),t.isHide?(o(),e("span",{key:0,onClick:n=>C(t),style:{cursor:"pointer"}},"...",8,jt)):i("",!0)])]),t.isHide?i("",!0):(o(),e(_,{key:0},[s("div",wt,[s("div",Nt,c(t.prompt_struct.constraints.subject),1),s("div",Ot,c(t.prompt_struct.constraints.describe),1)]),s("div",$t,[s("div",Bt,c(t.prompt_struct.output.subject),1),s("div",Gt,c(t.prompt_struct.output.describe),1)]),s("div",Vt,[s("div",Dt,c(t.prompt_struct.tone.subject),1),s("div",Et,c(t.prompt_struct.tone.describe),1)]),(o(!0),e(_,null,x(t.prompt_struct.custom,n=>(o(),e("div",{class:"structure-list",key:n.subject},[s("div",Mt,c(n.subject),1),s("div",Pt,c(n.describe),1)]))),128))],64))]))])]))),128))]),g.value.length==0?(o(),k(V,{key:1,style:{"padding-top":"100px"},description:"暂无数据"})):i("",!0)]),_:1})])])]),_:1},8,["open"])])}}},Yt=M(Ut,[["__scopeId","data-v-aef34bc0"]]);export{Yt as I};
