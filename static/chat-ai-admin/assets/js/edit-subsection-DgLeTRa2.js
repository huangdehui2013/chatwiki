import{A as Ae,aX as tt,bS as at,aN as M,aY as nt,b7 as ot,b6 as T,aT as st,a_ as lt,aS as ee,b1 as re,b5 as it,bD as be,bE as rt,bT as dt,c2 as ye,ac as ct,b as ce,de as ze,di as ut,k as j,M as De,dd as mt,dj as vt,dk as _t,B as ft,d as pt}from"../../index-CuFzRDH0.js";import{_ as Ee,T as He}from"./index-Cdh10aiJ.js";import{k as r,f as Te,e as f,w as je,b as te,o as ht,q as gt,z as Re,s as Se,M as y,N as C,S as x,Q as G,Y as L,W as a,u as N,a7 as H,F as de,$ as bt,X as ue,Z as R,B as xe,a5 as yt,G as $e,H as we,a6 as St,a1 as xt,a2 as $t}from"./vue-chunks-DkYK5AuX.js";import"./index-5PrSJtCq.js";import{I as Ne}from"./Input-DlD3j6GW.js";import{_ as wt,a as Ct}from"./index-CaI5udhb.js";import{U as Ot}from"./index-Dq04eVXF.js";import{C as Pt}from"./index-C4ag7WaN.js";import{M as Mt}from"./index-BMSQkwth.js";import{h as It,r as Lt}from"./collapseMotion-D38MKU2V.js";import{L as At}from"./LeftOutlined-BL6rtvtT.js";import{_ as zt}from"./TextArea-DnYx9N6z.js";import{_ as Dt}from"./index-BDEXdwqG.js";var Et={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 00.6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0046.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3z"}}]},name:"star",theme:"filled"};const Ht=Et;function Ce(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?Object(arguments[t]):{},d=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(d=d.concat(Object.getOwnPropertySymbols(n).filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable}))),d.forEach(function(l){Tt(e,l,n[l])})}return e}function Tt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var me=function(t,n){var d=Ce({},t,n.attrs);return r(Ae,Ce({},d,{icon:Ht}),null)};me.displayName="StarFilled";me.inheritAttrs=!1;const ve=me;function Oe(e,t){return{[`${e}, ${e}:hover, ${e}:focus`]:{color:t.colorTextDisabled,cursor:"not-allowed"}}}function Pe(e){return{backgroundColor:e.bgColorSelected,boxShadow:e.boxShadow}}const jt=M({overflow:"hidden"},nt),Rt=e=>{const{componentCls:t}=e;return{[t]:M(M(M(M(M({},ot(e)),{display:"inline-block",padding:e.segmentedContainerPadding,color:e.labelColor,backgroundColor:e.bgColor,borderRadius:e.borderRadius,transition:`all ${e.motionDurationMid} ${e.motionEaseInOut}`,[`${t}-group`]:{position:"relative",display:"flex",alignItems:"stretch",justifyItems:"flex-start",width:"100%"},[`&${t}-rtl`]:{direction:"rtl"},[`&${t}-block`]:{display:"flex"},[`&${t}-block ${t}-item`]:{flex:1,minWidth:0},[`${t}-item`]:{position:"relative",textAlign:"center",cursor:"pointer",transition:`color ${e.motionDurationMid} ${e.motionEaseInOut}`,borderRadius:e.borderRadiusSM,"&-selected":M(M({},Pe(e)),{color:e.labelColorHover}),"&::after":{content:'""',position:"absolute",width:"100%",height:"100%",top:0,insetInlineStart:0,borderRadius:"inherit",transition:`background-color ${e.motionDurationMid}`,pointerEvents:"none"},[`&:hover:not(${t}-item-selected):not(${t}-item-disabled)`]:{color:e.labelColorHover,"&::after":{backgroundColor:e.bgColorHover}},"&-label":M({minHeight:e.controlHeight-e.segmentedContainerPadding*2,lineHeight:`${e.controlHeight-e.segmentedContainerPadding*2}px`,padding:`0 ${e.segmentedPaddingHorizontal}px`},jt),"&-icon + *":{marginInlineStart:e.marginSM/2},"&-input":{position:"absolute",insetBlockStart:0,insetInlineStart:0,width:0,height:0,opacity:0,pointerEvents:"none"}},[`${t}-thumb`]:M(M({},Pe(e)),{position:"absolute",insetBlockStart:0,insetInlineStart:0,width:0,height:"100%",padding:`${e.paddingXXS}px 0`,borderRadius:e.borderRadiusSM,[`& ~ ${t}-item:not(${t}-item-selected):not(${t}-item-disabled)::after`]:{backgroundColor:"transparent"}}),[`&${t}-lg`]:{borderRadius:e.borderRadiusLG,[`${t}-item-label`]:{minHeight:e.controlHeightLG-e.segmentedContainerPadding*2,lineHeight:`${e.controlHeightLG-e.segmentedContainerPadding*2}px`,padding:`0 ${e.segmentedPaddingHorizontal}px`,fontSize:e.fontSizeLG},[`${t}-item, ${t}-thumb`]:{borderRadius:e.borderRadius}},[`&${t}-sm`]:{borderRadius:e.borderRadiusSM,[`${t}-item-label`]:{minHeight:e.controlHeightSM-e.segmentedContainerPadding*2,lineHeight:`${e.controlHeightSM-e.segmentedContainerPadding*2}px`,padding:`0 ${e.segmentedPaddingHorizontalSM}px`},[`${t}-item, ${t}-thumb`]:{borderRadius:e.borderRadiusXS}}}),Oe(`&-disabled ${t}-item`,e)),Oe(`${t}-item-disabled`,e)),{[`${t}-thumb-motion-appear-active`]:{transition:`transform ${e.motionDurationSlow} ${e.motionEaseInOut}, width ${e.motionDurationSlow} ${e.motionEaseInOut}`,willChange:"transform, width"}})}},Nt=tt("Segmented",e=>{const{lineWidthBold:t,lineWidth:n,colorTextLabel:d,colorText:l,colorFillSecondary:m,colorBgLayout:p,colorBgElevated:b}=e,u=at(e,{segmentedPaddingHorizontal:e.controlPaddingHorizontal-n,segmentedPaddingHorizontalSM:e.controlPaddingHorizontalSM-n,segmentedContainerPadding:t,labelColor:d,labelColorHover:l,bgColor:p,bgColorHover:m,bgColorSelected:b});return[Rt(u)]}),Me=e=>e?{left:e.offsetLeft,right:e.parentElement.clientWidth-e.clientWidth-e.offsetLeft,width:e.clientWidth}:null,V=e=>e!==void 0?`${e}px`:void 0,qt=Te({props:{value:T(),getValueIndex:T(),prefixCls:T(),motionName:T(),onMotionStart:T(),onMotionEnd:T(),direction:T(),containerRef:T()},emits:["motionStart","motionEnd"],setup(e,t){let{emit:n}=t;const d=f(),l=o=>{var c;const I=e.getValueIndex(o),z=(c=e.containerRef.value)===null||c===void 0?void 0:c.querySelectorAll(`.${e.prefixCls}-item`)[I];return(z==null?void 0:z.offsetParent)&&z},m=f(null),p=f(null);je(()=>e.value,(o,c)=>{const I=l(c),z=l(o),ne=Me(I),X=Me(z);m.value=ne,p.value=X,n(I&&z?"motionStart":"motionEnd")},{flush:"post"});const b=te(()=>{var o,c;return e.direction==="rtl"?V(-((o=m.value)===null||o===void 0?void 0:o.right)):V((c=m.value)===null||c===void 0?void 0:c.left)}),u=te(()=>{var o,c;return e.direction==="rtl"?V(-((o=p.value)===null||o===void 0?void 0:o.right)):V((c=p.value)===null||c===void 0?void 0:c.left)});let S;const h=o=>{clearTimeout(S),Re(()=>{o&&(o.style.transform="translateX(var(--thumb-start-left))",o.style.width="var(--thumb-start-width)")})},$=o=>{S=setTimeout(()=>{o&&(It(o,`${e.motionName}-appear-active`),o.style.transform="translateX(var(--thumb-active-left))",o.style.width="var(--thumb-active-width)")})},P=o=>{m.value=null,p.value=null,o&&(o.style.transform=null,o.style.width=null,Lt(o,`${e.motionName}-appear-active`)),n("motionEnd")},A=te(()=>{var o,c;return{"--thumb-start-left":b.value,"--thumb-start-width":V((o=m.value)===null||o===void 0?void 0:o.width),"--thumb-active-left":u.value,"--thumb-active-width":V((c=p.value)===null||c===void 0?void 0:c.width)}});return ht(()=>{clearTimeout(S)}),()=>{const o={ref:d,style:A.value,class:[`${e.prefixCls}-thumb`]};return r(gt,{appear:!0,onBeforeEnter:h,onEnter:$,onAfterEnter:P},{default:()=>[!m.value||!p.value?null:r("div",o,null)]})}}}),Ft=qt;function Bt(e){return e.map(t=>typeof t=="object"&&t!==null?t:{label:t==null?void 0:t.toString(),title:t==null?void 0:t.toString(),value:t})}const Ut=()=>({prefixCls:String,options:it(),block:be(),disabled:be(),size:rt(),value:M(M({},dt([String,Number])),{required:!0}),motionName:String,onChange:ye(),"onUpdate:value":ye()}),qe=(e,t)=>{let{slots:n,emit:d}=t;const{value:l,disabled:m,payload:p,title:b,prefixCls:u,label:S=n.label,checked:h,className:$}=e,P=A=>{m||d("change",A,l)};return r("label",{class:re({[`${u}-item-disabled`]:m},$)},[r("input",{class:`${u}-item-input`,type:"radio",disabled:m,checked:h,onChange:P},null),r("div",{class:`${u}-item-label`,title:typeof b=="string"?b:""},[typeof S=="function"?S({value:l,disabled:m,payload:p,title:b}):S??l])])};qe.inheritAttrs=!1;const kt=Te({name:"ASegmented",inheritAttrs:!1,props:st(Ut(),{options:[],motionName:"thumb-motion"}),slots:Object,setup(e,t){let{emit:n,slots:d,attrs:l}=t;const{prefixCls:m,direction:p,size:b}=lt("segmented",e),[u,S]=Nt(m),h=Se(),$=Se(!1),P=te(()=>Bt(e.options)),A=(o,c)=>{e.disabled||(n("update:value",c),n("change",c))};return()=>{const o=m.value;return u(r("div",ee(ee({},l),{},{class:re(o,{[S.value]:!0,[`${o}-block`]:e.block,[`${o}-disabled`]:e.disabled,[`${o}-lg`]:b.value=="large",[`${o}-sm`]:b.value=="small",[`${o}-rtl`]:p.value==="rtl"},l.class),ref:h}),[r("div",{class:`${o}-group`},[r(Ft,{containerRef:h,prefixCls:o,value:e.value,motionName:`${o}-${e.motionName}`,direction:p.value,getValueIndex:c=>P.value.findIndex(I=>I.value===c),onMotionStart:()=>{$.value=!0},onMotionEnd:()=>{$.value=!1}},null),P.value.map(c=>r(qe,ee(ee({key:c.value,prefixCls:o,checked:c.value===e.value,onChange:A},c),{},{className:re(c.className,`${o}-item`,{[`${o}-item-selected`]:c.value===e.value&&!$.value}),disabled:!!e.disabled||!!c.disabled}),d))])]))}}}),Vt=ct(kt);var Gt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 00.6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0046.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3zM664.8 561.6l36.1 210.3L512 672.7 323.1 772l36.1-210.3-152.8-149L417.6 382 512 190.7 606.4 382l211.2 30.7-152.8 148.9z"}}]},name:"star",theme:"outlined"};const Wt=Gt;function Ie(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?Object(arguments[t]):{},d=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(d=d.concat(Object.getOwnPropertySymbols(n).filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable}))),d.forEach(function(l){Xt(e,l,n[l])})}return e}function Xt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _e=function(t,n){var d=Ie({},t,n.attrs);return r(Ae,Ie({},d,{icon:Wt}),null)};_e.displayName="StarOutlined";_e.inheritAttrs=!1;const Fe=_e,fe={a:"#F00000",b:"#2475FC",c:"#03B615",d:"#F59A23",e:"#F4EA2A"},Kt={class:"star-select-box"},Qt={class:"star-item"},Jt={class:"star-item"},Yt={key:0},Zt={__name:"selct-star-box",props:{startLists:{type:Array,default:()=>[]},hideId:{type:[Number,String,Array],default:()=>[]}},emits:["change"],setup(e,{emit:t}){const n=t,d=e,l=f(-1),m=()=>{n("change",l.value)};return(p,b)=>{const u=Ee,S=He;return y(),C("div",Kt,[r(S,{activeKey:l.value,"onUpdate:activeKey":b[0]||(b[0]=h=>l.value=h),size:"small",onChange:m},{default:x(()=>[(y(),G(u,{key:-1},{tab:x(()=>[L("全部")]),_:1})),e.hideId.includes(0)?H("",!0):(y(),G(u,{key:0},{tab:x(()=>[a("div",Qt,[r(N(Fe)),L("未精选")])]),_:1})),(y(!0),C(de,null,bt(d.startLists,h=>(y(),G(u,{key:h.id},{tab:x(()=>[a("div",Jt,[r(N(ve),{style:ue({color:N(fe)[h.type]})},null,8,["style"]),L(" "+R(h.name||"-")+" ",1),h.data_count>0?(y(),C("span",Yt,"("+R(h.data_count)+")",1)):H("",!0)])]),_:2},1024))),128))]),_:1},8,["activeKey"])])}}},qn=ce(Zt,[["__scopeId","data-v-e555fc42"]]),ea={class:"modal-box"},ta={class:"list-box"},aa={__name:"classification-mark-modal",emits:["ok"],setup(e,{expose:t,emit:n}){const d=f(!1),l=n,m=f([]),p=()=>{b(),d.value=!0},b=()=>{ze().then(S=>{m.value=S.data})},u=()=>{let S=m.value.map(h=>({id:+h.id,name:h.name}));ut({data:JSON.stringify(S)}).then(h=>{j.success("保存成功"),l("ok"),d.value=!1})};return t({show:p}),(S,h)=>{const $=wt,P=Ne,A=Ct,o=De;return y(),C("div",null,[r(o,{open:d.value,"onUpdate:open":h[0]||(h[0]=c=>d.value=c),title:"精选设置",onOk:u,width:586},{default:x(()=>[a("div",ea,[a("div",ta,[r(A,{"data-source":m.value,pagination:!1},{default:x(()=>[r($,{key:"tags",title:"图标","data-index":"tags",width:200},{default:x(({record:c})=>[r(N(ve),{class:"start-icon",style:ue({color:N(fe)[c.type]})},null,8,["style"])]),_:1}),r($,{key:"name",title:"备注","data-index":"name",width:200},{default:x(({record:c})=>[r(P,{value:c.name,"onUpdate:value":I=>c.name=I,maxLength:4,placeholder:"请设置,最多4个字"},null,8,["value","onUpdate:value"])]),_:1})]),_:1},8,["data-source"])])])]),_:1},8,["open"])])}}},Fn=ce(aa,[["__scopeId","data-v-52814820"]]);var _={},pe;Object.defineProperty(_,"__esModule",{value:!0});_.controlDefaultValue=_.capitalize=_.camelize=_.cacheStringFunction=void 0;_.getDataAndAriaProps=ma;_.isSymbol=_.isString=_.isOn=_.isObject=_.isFunction=pe=_.isArray=_.hyphenate=void 0;_.renderHelper=_a;_.resolvePropValue=ua;_.toPx=va;_.wrapPromiseFn=fa;const Be=e=>typeof e=="function";_.isFunction=Be;_.controlDefaultValue=Symbol("controlDefaultValue");pe=_.isArray=Array.isArray;const na=e=>typeof e=="string";_.isString=na;const oa=e=>typeof e=="symbol";_.isSymbol=oa;const sa=e=>e!==null&&typeof e=="object";_.isObject=sa;const la=/^on[^a-z]/,ia=e=>la.test(e);_.isOn=ia;const ae=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))};_.cacheStringFunction=ae;const ra=/-(\w)/g;_.camelize=ae(e=>e.replace(ra,(t,n)=>n?n.toUpperCase():""));const da=/\B([A-Z])/g;_.hyphenate=ae(e=>e.replace(da,"-$1").toLowerCase());_.capitalize=ae(e=>e.charAt(0).toUpperCase()+e.slice(1));const ca=Object.prototype.hasOwnProperty,Le=(e,t)=>ca.call(e,t);function ua(e,t,n,d){const l=e[n];if(l!=null){const m=Le(l,"default");if(m&&d===void 0){const p=l.default;d=l.type!==Function&&Be(p)?p():p}l.type===Boolean&&(!Le(t,n)&&!m?d=!1:d===""&&(d=!0))}return d}function ma(e){return Object.keys(e).reduce((t,n)=>((n.startsWith("data-")||n.startsWith("aria-"))&&(t[n]=e[n]),t),{})}function va(e){return typeof e=="number"?`${e}px`:e}function _a(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return typeof e=="function"?e(t):e??n}function fa(e){let t;const n=new Promise(l=>{t=e(()=>{l(!0)})}),d=()=>{t==null||t()};return d.then=(l,m)=>n.then(l,m),d.promise=n,d}const w=e=>(xt("data-v-da2dc230"),e=e(),$t(),e),pa={class:"custom-modal-header"},ha={class:"form-box-wrapper"},ga={class:"form-item"},ba=w(()=>a("div",{class:"form-label"},"分段标题：",-1)),ya={class:"form-content"},Sa={class:"form-item"},xa=w(()=>a("div",{class:"form-label"},"分段分类标记",-1)),$a={class:"form-content"},wa={class:"star-item-box"},Ca={key:2},Oa={class:"form-item"},Pa=w(()=>a("div",{class:"form-label required"},"分段问题：",-1)),Ma={class:"form-content"},Ia={class:"form-item"},La={class:"form-label-box"},Aa=w(()=>a("div",{class:"form-label required"},"相似问法",-1)),za=w(()=>a("div",{class:"ai-generate-text"},"AI自动生成",-1)),Da={class:"form-content"},Ea=w(()=>a("div",{class:"form-content-tip"},"一行一个，最多可添加100个相似问法",-1)),Ha={class:"form-item"},Ta=w(()=>a("div",{class:"form-label required"},"分段答案：",-1)),ja={class:"form-content"},Ra={key:0,class:"error-tip"},Na={key:1,class:"form-item"},qa=w(()=>a("div",{class:"form-label required"},"分段内容：",-1)),Fa={class:"form-content"},Ba={key:0,class:"error-tip"},Ua={class:"form-item"},ka=w(()=>a("div",{class:"form-label"},"附件",-1)),Va={class:"form-content"},Ga={class:"upload-box-wrapper"},Wa={key:0},Xa={class:"ai-generate-wrapper"},Ka={class:"form-box-wrapper ai-generate-wrapper-box"},Qa={class:"ai-generate-wrapper-left"},Ja={class:"form-box-wrapper-options"},Ya={class:"form-item flex1"},Za=w(()=>a("div",{class:"form-label required"},"相似问法模型：",-1)),en={class:"form-content"},tn={class:"form-item flex1"},an={class:"form-content dual-inputs"},nn={class:"input-group"},on=w(()=>a("div",{class:"form-label required"},"问题个数：",-1)),sn={class:"form-label-input-box"},ln={class:"form-box-wrapper-content"},rn={class:"problem-box"},dn=w(()=>a("div",{class:"problem"},"问题",-1)),cn={class:"problem-content"},un={class:"problem-box"},mn=w(()=>a("div",{class:"problem"},"答案",-1)),vn={class:"problem-content"},_n={class:"form-item generate-btn-box"},fn={class:"result-nav"},pn={key:0,class:"tip"},hn={key:1,class:"result-nav-text"},gn={key:0,class:"container"},bn=w(()=>a("div",{class:"rect-container rect1"},[a("div",{class:"rect"})],-1)),yn=w(()=>a("div",{class:"rect-container rect2"},[a("div",{class:"rect"})],-1)),Sn=w(()=>a("div",{class:"rect-container rect3"},[a("div",{class:"rect"})],-1)),xn=[bn,yn,Sn],$n={class:"result-container"},wn=["innerHTML"],Cn={class:"result-footer"},On={__name:"edit-subsection",props:{detailsInfo:{type:Object}},emits:["handleEdit","handleStatrList"],setup(e,{expose:t,emit:n}){const d=f(!1),l=f(!1),m=f(!1),p=f(!1),b=f(!1),u=xe({use_model:"",use_model_icon:"",use_model_name:"",is_offline:"",model_config_id:"",count:5}),S=new Mt({html:!0,linkify:!0,typographer:!0}),h=f(""),$=xe({finish:"",content:""});je(()=>$.content,()=>{h.value=S.render($.content)});const P=yt(),A=P.query,o=P.name,c=e,I=n,z=f(""),ne=["azure","ollama","xinference","openaiAgent"],X=f("1"),U=f(!1),K=f(""),q=f(""),D=f(""),F=f(""),E=f(""),k=f([]),W=f(0),oe=f(""),B=f(!1),Ue=i=>{l.value=!1,m.value=!1,b.value=!1,K.value=i.title||"",q.value=i.content||"",oe.value=i.id||"",D.value=i.answer||"",k.value=i.images||[],F.value=i.question||"",E.value=i.similar_questions?i.similar_questions.join(`
`):"",B.value=c.detailsInfo.is_qa_doc=="1",W.value=i.category_id||0,le(),U.value=!0},se=f([]),le=()=>{ze({file_id:A.id}).then(i=>{let s=i.data||[];s=s.map(g=>({value:g.id,payload:{...g,color:fe[g.type]}})),o=="categaryManages"?se.value=[...s]:se.value=[{value:0,payload:{id:0,name:"未标记"}},...s],I("handleStatrList",i.data||[])})},he=()=>{if(ge(),!q.value&&!B.value)return j.error("请输入分段内容");if(!F.value&&B.value)return j.error("请输入分段问题");if(!D.value&&B.value)return j.error("请输入分段答案");if(B.value&&D.value.length>1e4||!B.value&&q.value.length>1e4)return;if(o=="categaryManages"&&W.value<=0)return j.error("请选择分类标记");let i={title:K.value,content:q.value,question:F.value,answer:D.value,images:k.value,category_id:W.value},s=E.value.trim();s?(s=s.split(`
`),i.similar_questions=JSON.stringify(s)):i.similar_questions="[]",oe.value?i.id=oe.value:i.file_id=P.query.id;let g=new FormData;for(let O in i)pe(i[O])?i[O].forEach(ie=>{g.append(O,ie)}):g.append(O,i[O]);o=="categaryManages"?(g.delete("file_id"),g.append("library_id",P.query.id),mt(g).then(O=>{j.success(i.id?"修改成功":"添加成功"),U.value=!1,I("handleEdit",{...i}),le()})):vt(g).then(O=>{j.success(i.id?"修改成功":"添加成功"),U.value=!1,I("handleEdit",{...i}),le()})},ke=()=>{l.value=!0},Q=f(""),Ve=async()=>{$.content="",Q.value="",p.value=!0,b.value=!0;try{let i={library_id:c.detailsInfo.library_id,model_config_id:u.model_config_id,use_model:u.use_model,num:u.count,question:F.value,answer:D.value};const s=await _t(i);Q.value=s.data.map(g=>g).join(`
`),$.content=s.data.map((g,O)=>`<div class="dialog-message">${O+1}. ${g}</div>`).join(""),m.value=!0}finally{p.value=!1}},Ge=()=>{E.value?E.value+=`
${Q.value}`:E.value+=Q.value,j.success("保存成功"),m.value=!1,l.value=!1,b.value=!1},We=i=>{u.use_model=ne.includes(i.rawData.model_define)&&i.rawData.deployment_name?i.rawData.deployment_name:i.rawData.name,u.use_model_icon=i.icon,u.use_model_name=i.use_model_name,u.model_config_id=i.rawData.id,z.value=i.rawData.model_define},J=f([]),Xe=i=>{J.value=i,Re(()=>{(!u.ai_chunk_model||!Number(u.ai_chunk_model_config_id))&&Ke()})},Ke=()=>{if(J.value.length>0){let i=null,s=null;for(let g of J.value)if(g.model_define==="tongyi"){i=g;for(let O of i.children)if(O.name==="qwen-max"){s=O;break}break}i||(i=J.value[0],s=i.children[0]),i&&s&&(u.use_model=s.name,u.model_config_id=s.model_config_id,u.ai_chunk_model=s.name,u.ai_chunk_model_config_id=s.model_config_id)}};function Qe(i){return i.split(`
`).map(s=>s.trim()).filter(s=>s).join(`
`)}const ge=()=>{E.value=Qe(E.value)};return t({showModal:Ue}),(i,s)=>{const g=ft,O=Ne,ie=Vt,Y=zt,Z=pt,Je=Ee,Ye=He,Ze=Dt,et=De;return y(),C("div",null,[r(et,{open:U.value,"onUpdate:open":s[12]||(s[12]=v=>U.value=v),onOk:he,width:l.value?b.value?"944px":"472px":"746px","ok-button-props":{style:{display:l.value?"none":"block"}}},{title:x(()=>[a("div",pa,[l.value?(y(),G(g,{key:0,type:"text",class:"back-button",onClick:s[0]||(s[0]=v=>l.value=!1)},{icon:x(()=>[r(N(At),{style:{"font-size":"12px"}})]),_:1})):H("",!0),a("span",null,R(l.value?"AI生成相似问法":"编辑分段"),1)])]),footer:x(()=>[l.value?H("",!0):(y(),C(de,{key:0},[r(g,{onClick:s[11]||(s[11]=v=>U.value=!1)},{default:x(()=>[L("取消")]),_:1}),r(g,{type:"primary",onClick:he},{default:x(()=>[L("确定")]),_:1})],64))]),default:x(()=>[$e(a("div",ha,[a("div",ga,[ba,a("div",ya,[r(O,{maxLength:25,value:K.value,"onUpdate:value":s[1]||(s[1]=v=>K.value=v),placeholder:"请输入分段标题"},null,8,["value"])])]),a("div",Sa,[xa,a("div",$a,[r(ie,{value:W.value,"onUpdate:value":s[2]||(s[2]=v=>W.value=v),options:se.value},{label:x(({payload:v})=>[a("div",wa,[v.id>0?(y(),G(N(ve),{key:0,style:ue({color:v.color})},null,8,["style"])):(y(),G(N(Fe),{key:1})),a("div",null,R(v.name||"-"),1),L(),v.data_count>0?(y(),C("span",Ca,"("+R(v.data_count)+")",1)):H("",!0)])]),_:1},8,["value","options"])])]),B.value?(y(),C(de,{key:0},[a("div",Oa,[Pa,a("div",Ma,[r(Y,{placeholder:"请输入分段问题",value:F.value,"onUpdate:value":s[3]||(s[3]=v=>F.value=v),style:{height:"100px"}},null,8,["value"])])]),a("div",Ia,[a("div",La,[Aa,a("div",{class:"ai-generate",onClick:ke},[r(Z,{name:"ai-generate",style:{"font-size":"14px"}}),za])]),a("div",Da,[r(Y,{placeholder:"请输入相似问法",value:E.value,"onUpdate:value":s[4]||(s[4]=v=>E.value=v),style:{height:"100px"},onBlur:ge},null,8,["value"]),Ea])]),a("div",Ha,[Ta,a("div",ja,[r(Y,{placeholder:"请输入分段答案",value:D.value,"onUpdate:value":s[5]||(s[5]=v=>D.value=v),style:{height:"100px"}},null,8,["value"]),D.value.length>1e4?(y(),C("div",Ra,"分段答案最多支持10000个字符")):H("",!0)])])],64)):(y(),C("div",Na,[qa,a("div",Fa,[r(Y,{style:{height:"150px"},value:q.value,"onUpdate:value":s[6]||(s[6]=v=>q.value=v),placeholder:"请输入分段内容"},null,8,["value"]),q.value.length>1e4?(y(),C("div",Ba,"分段内容最多支持10000个字符")):H("",!0)])])),a("div",Ua,[ka,a("div",Va,[a("div",Ga,[r(Ye,{activeKey:X.value,"onUpdate:activeKey":s[7]||(s[7]=v=>X.value=v),size:"small"},{default:x(()=>[r(Je,{key:"1"},{tab:x(()=>[a("span",null,[r(Z,{name:"img-icon",style:{"font-size":"14px",color:"#2475fc"}}),L(" 图片 "),k.value.length?(y(),C("span",Wa,"("+R(k.value.length)+")",1)):H("",!0)])]),_:1})]),_:1},8,["activeKey"]),r(Ot,{value:k.value,"onUpdate:value":s[8]||(s[8]=v=>k.value=v)},null,8,["value"])])])])],512),[[we,!l.value]]),$e(a("div",Xa,[a("div",Ka,[a("div",Qa,[a("div",Ja,[a("div",Ya,[Za,a("div",en,[r(Pt,{modelValue:u.use_model,"onUpdate:modelValue":s[9]||(s[9]=v=>u.use_model=v),"label-key":"use_model_name","value-key":"value",modelType:"LLM","model-config-id":u.model_config_id,onChange:We,onLoaded:Xe},null,8,["modelValue","model-config-id"])])]),a("div",tn,[a("div",an,[a("div",nn,[on,a("div",sn,[r(Ze,{value:u.count,"onUpdate:value":s[10]||(s[10]=v=>u.count=v),min:1,max:20,style:{width:"100%",padding:"2px 11px"}},null,8,["value"]),L("个 ")])])])])]),a("div",ln,[a("div",rn,[dn,a("div",cn,R(F.value),1)]),a("div",un,[mn,a("div",vn,R(D.value),1)])]),a("div",_n,[r(g,{onClick:Ve,loading:p.value,class:"generate-btn"},{default:x(()=>[r(Z,{name:"ai-generate-white",style:{"font-size":"16px"}}),L(" 开始生成 ")]),_:1},8,["loading"])])]),a("div",{class:St(["ai-generate-wrapper-right",{"show-result":b.value}])},[a("div",fn,[r(Z,{name:"generate-icon",style:{"font-size":"14px"}}),p.value?(y(),C("span",pn,"相似问法生成中...")):(y(),C("div",hn,"相似问法生成完毕"))]),!$.content&&p.value&&!d.value?(y(),C("div",gn,xn)):H("",!0),a("div",$n,[a("div",{class:"dialog-content",innerHTML:h.value},null,8,wn)]),a("div",Cn,[r(g,{class:"result-footer-btn",type:"primary",onClick:Ge},{default:x(()=>[L("保存相似问法")]),_:1})])],2)])],512),[[we,l.value]])]),_:1},8,["open","width","ok-button-props"])])}}},Bn=ce(On,[["__scopeId","data-v-da2dc230"]]);export{Fn as C,Bn as E,ve as S,Fe as a,qn as b,fe as c};
