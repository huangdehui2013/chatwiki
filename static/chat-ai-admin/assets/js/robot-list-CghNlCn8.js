import{b as q,l as G,a5 as K,a6 as Q,M as A,E as B,k as P,B as Y,d as Z}from"../../index-CuFzRDH0.js";import{e as m,b as L,a4 as z,x as H,M as b,N as y,k as s,S as n,W as e,Q as J,a7 as X,F as oo,$ as to,a0 as r,u as C,Y as eo,Z as g,a1 as so,a2 as no}from"./vue-chunks-DkYK5AuX.js";import{g as ao,c as io,r as lo}from"./index-aParrWES.js";import{A as ro}from"./add-robot-alert-ND-z0QXO.js";import{_ as co}from"./page-alert-Bt4HLQNk.js";import{L as po}from"./list-tabs-epKpsvzm.js";import"./index-DmWi8Hkf.js";import{D as _o}from"./dropdown-aM3tBgR4.js";import{_ as uo,M as mo}from"./index-D2p2Kdi5.js";import{P as bo}from"./PlusOutlined-C1-JNsax.js";import{_ as vo}from"./index-DVObnatt.js";import"./axios-Cm0UX6qg.js";import"./qs-g-qVsYXK.js";import"./crypto-js-CsNcoEfj.js";import"./dayjs-CHX5mXCJ.js";import"./index-njT3lQ6A.js";import"./index-CKa8nflF.js";import"./Trigger-qqJEyN1K.js";import"./ResizeObserver.es-B1PUzC5B.js";import"./isPlainObject-B3m2dvNk.js";import"./responsiveObserve-nm9aPAMw.js";import"./collapseMotion-D38MKU2V.js";import"./QuestionCircleOutlined-DySDEe_b.js";import"./FormItemContext-CG4o3aCY.js";import"./index-CR3o8wp3.js";import"./Password-B-_rMC_p.js";import"./Input-DlD3j6GW.js";import"./index-DpON8wvi.js";import"./inputProps-CIG3Q6HA.js";import"./DownloadOutlined-CpROJx0R.js";import"./CheckOutlined-Nu5wJEo2.js";import"./robot-Cmbvv6Dq.js";import"./index-5PrSJtCq.js";import"./Search-BjDfM7wD.js";import"./SearchOutlined-2-sBVYkv.js";import"./TextArea-DnYx9N6z.js";import"./index-CNYsll_x.js";import"./Dropdown-DNhcw7uk.js";import"./RightOutlined-C7Gymx4e.js";import"./move-CfeIRdjT.js";import"./slide--PTaLm6c.js";import"./colors-TmzmwKXv.js";import"./shallowequal-CCVEH32S.js";const v=d=>(so("data-v-21c5c132"),d=d(),no(),d),fo={class:"robot-page"},ko=v(()=>e("h3",{class:"page-title"},"应用",-1)),ho=v(()=>e("div",null,[e("p",null," 1、应用包括两种类型：聊天机器人、工作流。聊天机器人适合新手用户，关联知识库后只需简单配置，即可创建一个基于私有知识库的问答机器人。工作流适合高级用户，利用系统预制节点自定义任务流程，适合解决复杂任务。 "),e("p",null,"2、发现模块也提供了丰富模版，可以根据需要选择适合模版快速创建应用。")],-1)),yo={class:"list-toolbar"},Co={class:"toolbar-box"},go={class:"toolbar-box"},xo={class:"create-action"},To=["src"],$o=v(()=>e("span",null,"聊天机器人",-1)),Ro={class:"create-action"},wo=["src"],Ao=v(()=>e("span",null,"工作流",-1)),Bo={class:"list-box"},Po=["onClick"],Lo={class:"list-item"},Io={class:"robot-info"},No=["src"],Oo={class:"robot-info-content"},So={class:"robot-name"},Do={class:"robot-type-tag"},Eo={class:"robot-desc"},Mo=["onClick"],Vo=["onClick"],Fo=["onClick"],Uo=["onClick"],Wo=["onClick"],jo={__name:"robot-list",setup(d){const x=m([{title:"全部 (0)",value:"2"},{title:"聊天机器人 (0)",value:"0"},{title:"工作流 (0)",value:"1"}]),I=G();let{role_permission:N}=I;const O=L(()=>N.includes("RobotCreate")),T=z(),p=m("2"),f=m([]),S=L(()=>p.value==2?f.value:f.value.filter(o=>o.application_type==p.value)),k=()=>{ao().then(o=>{let t=0,l=0,i=0;o.data.forEach(_=>{_.application_type==0?l++:i++,t++}),x.value=[{title:"全部 ("+t+")",value:"2"},{title:"聊天机器人 ("+l+")",value:"0"},{title:"工作流 ("+i+")",value:"1"}],f.value=o.data}).catch(()=>{})},$=m(null),R=o=>{$.value.open(o)},D=({id:o,robot_key:t,application_type:l})=>{l==0?T.push({path:"/robot/config/basic-config",query:{id:o,robot_key:t}}):T.push({path:"/robot/config/workflow",query:{id:o,robot_key:t}})},E=o=>{let t=3,l=A.confirm({title:`删除机器人${o.robot_name}`,icon:s(B),content:"您确定要删除此机器人吗？",okText:t+" 确 定",okType:"danger",cancelText:"取 消",okButtonProps:{disabled:!0},onOk(){M(o)},onCancel(){}}),i=setInterval(()=>{t==1?(l.update({okText:"确 定",okButtonProps:{disabled:!1}}),clearInterval(i),i=void 0):(t-=1,l.update({okText:t+" 确 定",okButtonProps:{disabled:!0}}))},1e3)},M=({id:o})=>{io({id:o}).then(()=>{P.success("删除成功"),k()})},V=o=>{let t=3,l=A.confirm({title:`复制机器人${o.robot_name}`,icon:s(B),content:"您确定要复制此机器人吗？",okText:t+" 确 定",okType:"danger",cancelText:"取 消",okButtonProps:{disabled:!0},onOk(){F(o)},onCancel(){}}),i=setInterval(()=>{t==1?(l.update({okText:"确 定",okButtonProps:{disabled:!1}}),clearInterval(i),i=void 0):(t-=1,l.update({okText:t+" 确 定",okButtonProps:{disabled:!0}}))},1e3)},F=({id:o})=>{lo({id:o}).then(()=>{P.success("复制成功"),k()})},U=o=>{window.open(`#/robot/test?robot_key=${o.robot_key}&id=${o.id}`)},W=o=>{window.open(`#/robot/config/session-record?robot_key=${o.robot_key}&id=${o.id}`)},j=o=>{window.open(`#/robot/config/statistical_analysis?robot_key=${o.robot_key}&id=${o.id}`)};return H(()=>{k()}),(o,t)=>{const l=Y,i=uo,_=mo,w=_o,u=Z,h=vo;return b(),y("div",fo,[ko,s(co,{class:"mb-16",title:"使用说明"},{default:n(()=>[ho]),_:1}),e("div",yo,[e("div",Co,[s(po,{tabs:x.value,value:p.value,"onUpdate:value":t[0]||(t[0]=a=>p.value=a)},null,8,["tabs","value"])]),e("div",go,[O.value?(b(),J(w,{key:0},{overlay:n(()=>[s(_,null,{default:n(()=>[s(i,{onClick:t[2]||(t[2]=r(a=>R(0),["prevent"]))},{default:n(()=>[e("span",xo,[e("img",{class:"icon",src:C(K),alt:""},null,8,To),$o])]),_:1}),s(i,{onClick:t[3]||(t[3]=r(a=>R(1),["prevent"]))},{default:n(()=>[e("span",Ro,[e("img",{class:"icon",src:C(Q),alt:""},null,8,wo),Ao])]),_:1})]),_:1})]),default:n(()=>[s(l,{type:"primary",onClick:t[1]||(t[1]=r(()=>{},["prevent"]))},{icon:n(()=>[s(C(bo))]),default:n(()=>[eo(" 创建应用 ")]),_:1})]),_:1})):X("",!0)])]),e("div",Bo,[(b(!0),y(oo,null,to(S.value,a=>(b(),y("div",{class:"list-item-wrapper",key:a.id,onClick:c=>D(a)},[e("div",Lo,[e("div",Io,[e("img",{class:"robot-avatar",src:a.robot_avatar,alt:""},null,8,No),e("div",Oo,[e("div",So,g(a.robot_name),1),e("div",Do,g(a.application_type==0?"聊天机器人":"工作流"),1)])]),e("div",Eo,g(a.robot_intro),1),e("div",{class:"robot-action",onClick:t[5]||(t[5]=r(()=>{},["stop"]))},[s(h,{title:"聊天测试"},{default:n(()=>[e("div",{class:"robot-action-item",onClick:r(c=>U(a),["stop"])},[s(u,{class:"action-icon",name:"chat"})],8,Mo)]),_:2},1024),s(h,{title:"会话记录"},{default:n(()=>[e("div",{class:"robot-action-item",onClick:r(c=>W(a),["stop"])},[s(u,{class:"action-icon",name:"session"})],8,Vo)]),_:2},1024),s(h,{title:"统计分析"},{default:n(()=>[e("div",{class:"robot-action-item",onClick:r(c=>j(a),["stop"])},[s(u,{class:"action-icon",name:"analysis"})],8,Fo)]),_:2},1024),s(w,null,{overlay:n(()=>[s(_,null,{default:n(()=>[s(i,null,{default:n(()=>[e("a",{class:"delete-text-color",href:"javascript:;",onClick:c=>E(a)},"删 除",8,Uo)]),_:2},1024),s(i,null,{default:n(()=>[e("a",{class:"copy-text-color",href:"javascript:;",onClick:c=>V(a)},"复 制",8,Wo)]),_:2},1024)]),_:2},1024)]),default:n(()=>[e("div",{class:"robot-action-item",onClick:t[4]||(t[4]=r(()=>{},["stop"]))},[s(u,{class:"action-icon",name:"point-h"})])]),_:2},1024)])])],8,Po))),128))]),s(ro,{ref_key:"addRobotAlertRef",ref:$},null,512)])}}},Nt=q(jo,[["__scopeId","data-v-21c5c132"]]);export{Nt as default};
