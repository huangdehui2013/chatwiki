import{d as h,a4 as j,w as H,M as c,N as a,W as o,F as S,a0 as D,a7 as C,u as y,a6 as K,k as e,Z as k,a3 as Q,Q as x,S as l,Y as T,a8 as E,e as P,x as W,D as X,a9 as Y,$ as Z,a1 as G,a2 as J,B,V as F,aa as ee,U as te,X as U}from"./vue-chunks-DKljrDvA.js";import{b as w,j as oe,d as V,h as I,f as se,R as ae,M as re,r as ne,k as ce}from"../../index-BYXP5-K6.js";import{L as le}from"./layout-logo-D1zNZw5w.js";import{_ as ie,B as ue}from"./index-CC3FY5qf.js";import{M as _e,_ as pe}from"./index-DcQhmA5K.js";import"./index-CYLnLfoe.js";import{D as de}from"./dropdown-QXBOTlLU.js";import{v as me}from"./validate-8MtiUsxW.js";import{F as N,_ as ve}from"./index-DvGRcWf4.js";import{_ as he}from"./index-BIs6VsWm.js";import{_ as fe}from"./Password-CPQYqxS0.js";import"./index-CcC8Vz_q.js";import"./axios-BZ84_VUH.js";import"./qs-DB0tj3pA.js";import"./crypto-js-fJpLWOEv.js";import"./dayjs-BpZi_McX.js";import"./DownOutlined-BfzuAtqc.js";import"./shallowequal-CthuG9FU.js";import"./Trigger-DAizGHX4.js";import"./ResizeObserver.es-B1PUzC5B.js";import"./collapseMotion-CxHtxgWr.js";import"./slide-C8pAsQDb.js";import"./index-2d7y8GiQ.js";import"./index-C9HKvTtP.js";import"./colors-BsGfXzR0.js";import"./RightOutlined-D_XHCIbp.js";import"./move-BNsvENtF.js";import"./isPlainObject-BRAWLrZZ.js";import"./responsiveObserve-DRuL2_me.js";import"./QuestionCircleOutlined-DYrN9KdY.js";import"./FormItemContext-BbeLgxF6.js";import"./Input-Bfzy8tJK.js";import"./index-DxTO0j69.js";import"./inputProps-B3PFVydJ.js";import"./Search-1aGcXLAr.js";import"./SearchOutlined-BAHqMa3J.js";import"./TextArea-Dnm7usWJ.js";const ye={class:"navbar-wrapper"},be={class:"navbar"},ke=["onClick"],we={class:"nav-name"},ge={__name:"layout-navbar",setup(m){const t=Q(),r=j(),i=h(()=>r.meta.activeMenu||""),u=h(()=>r.path.split("/")[1]),d=[{id:1,key:"robot",label:"robot",title:"应用",icon:"nav-robot",path:"/robot/list",permission:["RobotManage"]},{id:2,key:"library",label:"library",title:"知识库",icon:"nav-library",path:"/library/list",permission:["LibraryManage"]},{id:3,key:"PublicLibrary",label:"PublicLibrary",title:"文档",icon:"nav-doc",path:"/public-library/list",permission:["*:*:*"]},{id:4,key:"library-search",label:"library-search",title:"搜索",icon:"search",path:"/library-search/index",permission:["LibrarySearch"]},{id:5,key:"chat-monitor",label:"chat-monitor",title:"会话",icon:"nav-chat",path:"/chat-monitor/index",permission:["*:*:*"]}],n=_=>{t.push(_.path)};return H(()=>r.path,()=>{},{immediate:!0}),(_,f)=>{const v=V;return a(),c("div",ye,[o("div",be,[(a(),c(S,null,D(d,s=>(a(),c(S,null,[y(oe)(s.permission)?(a(),c("div",{class:K(["nav-menu",{active:s.key===u.value||s.key===i.value}]),key:s.key,onClick:g=>n(s)},[e(v,{class:"nav-icon",name:s.icon},null,8,["name"]),o("span",we,k(s.title),1)],10,ke)):C("",!0)],64))),64))])])}}},$e=w(ge,[["__scopeId","data-v-737d3aa5"]]),xe={class:"layout-breadcrumb"},Se={key:1,class:"page-title"},Ce={__name:"layout-breadcrumb",props:{title:{type:[String,Boolean],default:""},items:{type:[Array,Boolean],default:()=>[]}},setup(m){const t=m;return(r,i)=>{const u=E("router-link"),d=ie,n=ue;return a(),c("div",xe,[t.items.length>0?(a(),x(n,{key:0},{default:l(()=>[(a(!0),c(S,null,D(t.items,(_,f)=>(a(),c(S,{key:_.title},[f!==t.items.length-1?(a(),x(d,{key:0},{default:l(()=>[e(u,{to:_.path},{default:l(()=>[T(k(_.title),1)]),_:2},1032,["to"])]),_:2},1024)):(a(),x(d,{key:1},{default:l(()=>[T(k(_.title),1)]),_:2},1024))],64))),128))]),_:1})):(a(),c("div",Se,k(t.title),1))])}}},Ie=w(Ce,[["__scopeId","data-v-c69a461d"]]),Me={class:"layout-footer"},Pe={class:"copyright-text"},Re={__name:"layout-footer",setup(m){const t=I(),{t:r}=se(),i=P(null);return W(()=>{i.value=setInterval(()=>{setTimeout(()=>{t.refreshToken()},0)},ae)}),X(()=>{clearInterval(i.value),i.value=null}),(u,d)=>(a(),c("div",Me,[o("div",Pe,k(y(r)("common.copyright")),1)]))}},Le=w(Re,[["__scopeId","data-v-ab337acb"]]),O=m=>(G("data-v-18e51def"),m=m(),J(),m),Te={key:0,class:"user-dropdown"},Be=["src"],Fe={class:"user-name"},Ue=O(()=>o("span",{class:"menu-name"},"系统管理",-1)),Ne=O(()=>o("span",{class:"menu-name"},"退出登录",-1)),je={__name:"user-dropdown",setup(m){const t=I(),{userInfo:r,avatar:i,user_name:u}=Y(t),d=()=>{t.logoutConfirm(!0)},n=()=>{window.open("/#/user/model","_blank","noopener")};return(_,f)=>{const v=V,s=pe,g=_e,b=de;return y(r)?(a(),c("div",Te,[e(b,null,{overlay:l(()=>[e(g,null,{default:l(()=>[e(s,null,{default:l(()=>[o("a",{class:"menu-item",href:"javascript:;",onClick:n},[e(v,{class:"menu-icon",name:"system-setting"}),Ue])]),_:1}),e(s,null,{default:l(()=>[o("a",{class:"menu-item",href:"javascript:;",onClick:d},[e(v,{class:"menu-icon",name:"logout"}),Ne])]),_:1})]),_:1})]),default:l(()=>[o("div",{class:"user-dropdown-link",onClick:f[0]||(f[0]=Z(()=>{},["prevent"]))},[o("img",{class:"user-avatar",src:y(i),alt:""},null,8,Be),o("span",Fe,k(y(u)),1),e(v,{name:"arrow-down",style:{"font-size":"16px",color:"#8c8c8c"}})])]),_:1})])):C("",!0)}}},De=w(je,[["__scopeId","data-v-18e51def"]]),Ee={class:"form-box"},Ve={__name:"reset-password",setup(m,{expose:t}){const r=I(),i=N.useForm,u=P(!0),d=P("重置登录密码"),n=B({password:"",check_password:"",id:r.userInfo.user_id}),_=B({password:[{message:"请输入登录密码",required:!0},{validator:async(M,p)=>!me(p)&&p?Promise.reject("密码必须包含字母、数字或者字符中的两种，6-32位"):Promise.resolve()}],check_password:[{message:"请输入确认密码",required:!0},{validator:async(M,p)=>p!=n.password&&p?Promise.reject("两次输入的密码不一致"):Promise.resolve()}]}),{resetFields:f,validate:v,validateInfos:s}=i(n,_),g=()=>{v().then(()=>{ne({...ee(n)}).then(M=>{ce.success("修改成功"),u.value=!1,r.reset(!0)})})},b=()=>{r.setResetPassModal()};return t({open}),(M,p)=>{const z=he,R=fe,L=ve,q=N,A=re;return a(),c("div",null,[e(A,{open:u.value,"onUpdate:open":p[2]||(p[2]=$=>u.value=$),title:d.value,onOk:g,width:"520px",onCancel:b},{default:l(()=>[e(z,{class:"alert-box",message:"您还未修改初始密码，为了保障您的数据安全，请您尽快重置密码。",type:"info","show-icon":""}),o("div",Ee,[e(q,{layout:"vertical"},{default:l(()=>[e(L,F({label:"登录密码"},y(s).password),{default:l(()=>[e(R,{value:n.password,"onUpdate:value":p[0]||(p[0]=$=>n.password=$),placeholder:"密码必须包含字母、数字或者字符中的两种，6-32位"},null,8,["value"])]),_:1},16),e(L,F({label:"确认密码"},y(s).check_password),{default:l(()=>[e(R,{value:n.check_password,"onUpdate:value":p[1]||(p[1]=$=>n.check_password=$),placeholder:"请重新输入密码"},null,8,["value"])]),_:1},16)]),_:1})])]),_:1},8,["open","title"])])}}},Oe=w(Ve,[["__scopeId","data-v-9de4c189"]]),ze={class:"admin-layout"},qe={class:"layout-header-wrapper"},Ae={class:"layout-header"},He={class:"header-left"},Ke={class:"header-body"},Qe={class:"header-right"},We={class:"item-box"},Xe={class:"layout-body"},Ye={key:0,class:"layout-breadcrumb-wrapper"},Ze={class:"layout-footer-wrapper"},Ge={__name:"index",setup(m){const t=j(),r=I(),i=h(()=>t.meta.isCustomPage||!1),u=h(()=>t.meta.pageStyle||{}),d=h(()=>t.meta.bgColor||"#ffffff"),n=h(()=>t.meta.breadcrumb||[]),_=h(()=>t.meta.hideTitle||!1),f=h(()=>t.meta.title||!1),v=h(()=>{var s;return((s=r.userInfo)==null?void 0:s.d_pass)==1&&r.isShowResetPassModal});return(s,g)=>{const b=E("router-view");return a(),c("div",ze,[o("div",qe,[o("div",Ae,[o("div",He,[e(le)]),o("div",Ke,[e($e)]),o("div",Qe,[o("div",We,[e(De)])])])]),o("div",Xe,[i.value?te(s.$slots,"default",{key:0},()=>[e(b)],!0):(a(),c("div",{key:1,class:"page-wrapper",style:U({"background-color":d.value})},[_.value?C("",!0):(a(),c("div",Ye,[e(Ie,{items:n.value,title:f.value},null,8,["items","title"])])),o("div",{class:"page-container",style:U({...u.value})},[e(b)],4)],4))]),o("div",Ze,[e(Le)]),v.value?(a(),x(Oe,{key:0})):C("",!0)])}}},Nt=w(Ge,[["__scopeId","data-v-9ab7d68c"]]);export{Nt as default};
