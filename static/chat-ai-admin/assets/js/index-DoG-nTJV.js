import{a4 as j,a5 as D,b as v,w as K,M as a,N as c,W as t,F as C,$ as E,u as f,a6 as Q,k as e,Z as w,a7 as I,a8 as V,Q as S,S as i,Y as T,e as P,x as W,D as X,a9 as Y,a0 as Z,a1 as G,a2 as J,B,V as F,aa as ee,U as te,X as U}from"./vue-chunks-DkYK5AuX.js";import{b as g,j as oe,d as O,f as M,h as se,R as ae,r as re,k as ne,M as ce}from"../../index-CuFzRDH0.js";import{L as le}from"./layout-logo-C8JlY8iL.js";import{_ as ie,B as ue}from"./index-DfjPin7b.js";import{_ as _e,M as pe}from"./index-D2p2Kdi5.js";import"./index-DmWi8Hkf.js";import{D as de}from"./dropdown-aM3tBgR4.js";import{v as me}from"./validate-8MtiUsxW.js";import{F as N,_ as ve}from"./index-CKa8nflF.js";import{_ as he}from"./index-B58k5Ecy.js";import{_ as fe}from"./Password-B-_rMC_p.js";import"./index-5PrSJtCq.js";import"./axios-Cm0UX6qg.js";import"./qs-g-qVsYXK.js";import"./crypto-js-CsNcoEfj.js";import"./dayjs-CHX5mXCJ.js";import"./DownOutlined-xHwfZhzl.js";import"./shallowequal-CCVEH32S.js";import"./Trigger-qqJEyN1K.js";import"./ResizeObserver.es-B1PUzC5B.js";import"./collapseMotion-D38MKU2V.js";import"./slide--PTaLm6c.js";import"./index-CNYsll_x.js";import"./index-DVObnatt.js";import"./colors-TmzmwKXv.js";import"./Dropdown-DNhcw7uk.js";import"./RightOutlined-C7Gymx4e.js";import"./move-CfeIRdjT.js";import"./isPlainObject-B3m2dvNk.js";import"./responsiveObserve-nm9aPAMw.js";import"./QuestionCircleOutlined-DySDEe_b.js";import"./FormItemContext-CG4o3aCY.js";import"./Input-DlD3j6GW.js";import"./index-DpON8wvi.js";import"./inputProps-CIG3Q6HA.js";import"./Search-BjDfM7wD.js";import"./SearchOutlined-2-sBVYkv.js";import"./TextArea-DnYx9N6z.js";const ye={class:"navbar-wrapper"},be={class:"navbar"},ke=["onClick"],we={class:"nav-name"},ge={__name:"layout-navbar",setup(m){const o=j(),r=D(),u=v(()=>r.meta.activeMenu||""),_=v(()=>r.path.split("/")[1]),d=[{id:1,key:"robot",label:"robot",title:"应用",icon:"nav-robot",path:"/robot/list",permission:["RobotManage"]},{id:2,key:"library",label:"library",title:"知识库",icon:"nav-library",path:"/library/list",permission:["LibraryManage"]},{id:3,key:"PublicLibrary",label:"PublicLibrary",title:"文档",icon:"nav-doc",path:"/public-library/list",permission:["*:*:*"]},{id:4,key:"library-search",label:"library-search",title:"搜索",icon:"search",path:"/library-search/index",permission:["LibrarySearch"]},{id:5,key:"chat-monitor",label:"chat-monitor",title:"会话",icon:"nav-chat",path:"/chat-monitor/index",permission:["*:*:*"]}],n=l=>{o.push(l.path)};return K(()=>r.path,()=>{},{immediate:!0}),(l,y)=>{const h=O;return a(),c("div",ye,[t("div",be,[(a(),c(C,null,E(d,s=>(a(),c(C,null,[f(oe)(s.permission)?(a(),c("div",{class:Q(["nav-menu",{active:s.key===_.value||s.key===u.value}]),key:s.key,onClick:b=>n(s)},[e(h,{class:"nav-icon",name:s.icon},null,8,["name"]),t("span",we,w(s.title),1)],10,ke)):I("",!0)],64))),64))])])}}},$e=g(ge,[["__scopeId","data-v-ad014eab"]]),xe={class:"layout-breadcrumb"},Se={key:1,class:"page-title"},Ce={__name:"layout-breadcrumb",props:{title:{type:[String,Boolean],default:""},items:{type:[Array,Boolean],default:()=>[]}},setup(m){const o=m;return(r,u)=>{const _=V("router-link"),d=ie,n=ue;return a(),c("div",xe,[o.items.length>0?(a(),S(n,{key:0},{default:i(()=>[(a(!0),c(C,null,E(o.items,(l,y)=>(a(),c(C,{key:l.title},[y!==o.items.length-1?(a(),S(d,{key:0},{default:i(()=>[e(_,{to:l.path},{default:i(()=>[T(w(l.title),1)]),_:2},1032,["to"])]),_:2},1024)):(a(),S(d,{key:1},{default:i(()=>[T(w(l.title),1)]),_:2},1024))],64))),128))]),_:1})):(a(),c("div",Se,w(o.title),1))])}}},Ie=g(Ce,[["__scopeId","data-v-3def9f41"]]),Me={class:"layout-footer"},Pe={class:"copyright-text"},Re={__name:"layout-footer",setup(m){const o=M(),{t:r}=se(),u=P(null);return W(()=>{u.value=setInterval(()=>{setTimeout(()=>{o.refreshToken()},0)},ae)}),X(()=>{clearInterval(u.value),u.value=null}),(_,d)=>(a(),c("div",Me,[t("div",Pe,w(f(r)("common.copyright")),1)]))}},Le=g(Re,[["__scopeId","data-v-ca41b2c2"]]),z=m=>(G("data-v-034c6757"),m=m(),J(),m),Te={key:0,class:"user-dropdown"},Be=["src"],Fe={class:"user-name"},Ue=z(()=>t("span",{class:"menu-name"},"系统管理",-1)),Ne=z(()=>t("span",{class:"menu-name"},"退出登录",-1)),je={__name:"user-dropdown",setup(m){const o=j(),r=M(),{userInfo:u,avatar:_,user_name:d}=Y(r),n=()=>{r.logoutConfirm(!0)},l=()=>{o.push({path:"/user/model"})};return(y,h)=>{const s=O,b=_e,k=pe,$=de;return f(u)?(a(),c("div",Te,[e($,null,{overlay:i(()=>[e(k,null,{default:i(()=>[e(b,null,{default:i(()=>[t("a",{class:"menu-item",href:"javascript:;",onClick:l},[e(s,{class:"menu-icon",name:"system-setting"}),Ue])]),_:1}),e(b,null,{default:i(()=>[t("a",{class:"menu-item",href:"javascript:;",onClick:n},[e(s,{class:"menu-icon",name:"logout"}),Ne])]),_:1})]),_:1})]),default:i(()=>[t("div",{class:"user-dropdown-link",onClick:h[0]||(h[0]=Z(()=>{},["prevent"]))},[t("img",{class:"user-avatar",src:f(_),alt:""},null,8,Be),t("span",Fe,w(f(d)),1),e(s,{name:"arrow-down",style:{"font-size":"16px",color:"#8c8c8c"}})])]),_:1})])):I("",!0)}}},De=g(je,[["__scopeId","data-v-034c6757"]]),Ee={class:"form-box"},Ve={__name:"reset-password",setup(m,{expose:o}){const r=M(),u=N.useForm,_=P(!0),d=P("重置登录密码"),n=B({password:"",check_password:"",id:r.userInfo.user_id}),l=B({password:[{message:"请输入登录密码",required:!0},{validator:async($,p)=>!me(p)&&p?Promise.reject("密码必须包含字母、数字或者字符中的两种，6-32位"):Promise.resolve()}],check_password:[{message:"请输入确认密码",required:!0},{validator:async($,p)=>p!=n.password&&p?Promise.reject("两次输入的密码不一致"):Promise.resolve()}]}),{resetFields:y,validate:h,validateInfos:s}=u(n,l),b=()=>{h().then(()=>{re({...ee(n)}).then($=>{ne.success("修改成功"),_.value=!1,r.reset(!0)})})},k=()=>{r.setResetPassModal()};return o({open}),($,p)=>{const q=he,R=fe,L=ve,A=N,H=ce;return a(),c("div",null,[e(H,{open:_.value,"onUpdate:open":p[2]||(p[2]=x=>_.value=x),title:d.value,onOk:b,width:"520px",onCancel:k},{default:i(()=>[e(q,{class:"alert-box",message:"您还未修改初始密码，为了保障您的数据安全，请您尽快重置密码。",type:"info","show-icon":""}),t("div",Ee,[e(A,{layout:"vertical"},{default:i(()=>[e(L,F({label:"登录密码"},f(s).password),{default:i(()=>[e(R,{value:n.password,"onUpdate:value":p[0]||(p[0]=x=>n.password=x),placeholder:"密码必须包含字母、数字或者字符中的两种，6-32位"},null,8,["value"])]),_:1},16),e(L,F({label:"确认密码"},f(s).check_password),{default:i(()=>[e(R,{value:n.check_password,"onUpdate:value":p[1]||(p[1]=x=>n.check_password=x),placeholder:"请重新输入密码"},null,8,["value"])]),_:1},16)]),_:1})])]),_:1},8,["open","title"])])}}},Oe=g(Ve,[["__scopeId","data-v-40aed5c2"]]),ze={class:"admin-layout"},qe={class:"layout-header-wrapper"},Ae={class:"layout-header"},He={class:"header-left"},Ke={class:"header-body"},Qe={class:"header-right"},We={class:"item-box"},Xe={class:"layout-body"},Ye={key:0,class:"layout-breadcrumb-wrapper"},Ze={class:"layout-footer-wrapper"},Ge={__name:"index",setup(m){const o=D(),r=M(),u=v(()=>o.meta.isCustomPage||!1),_=v(()=>o.meta.pageStyle||{}),d=v(()=>o.meta.bgColor||"#ffffff"),n=v(()=>o.meta.breadcrumb||[]),l=v(()=>o.meta.hideTitle||!1),y=v(()=>o.meta.title||!1),h=v(()=>{var s;return((s=r.userInfo)==null?void 0:s.d_pass)==1&&r.isShowResetPassModal});return(s,b)=>{const k=V("router-view");return a(),c("div",ze,[t("div",qe,[t("div",Ae,[t("div",He,[e(le)]),t("div",Ke,[e($e)]),t("div",Qe,[t("div",We,[e(De)])])])]),t("div",Xe,[u.value?te(s.$slots,"default",{key:0},()=>[e(k)],!0):(a(),c("div",{key:1,class:"page-wrapper",style:U({"background-color":d.value})},[l.value?I("",!0):(a(),c("div",Ye,[e(Ie,{items:n.value,title:y.value},null,8,["items","title"])])),t("div",{class:"page-container",style:U({..._.value})},[e(k)],4)],4))]),t("div",Ze,[e(Le)]),h.value?(a(),S(Oe,{key:0})):I("",!0)])}}},jt=g(Ge,[["__scopeId","data-v-d663ab1a"]]);export{jt as default};
