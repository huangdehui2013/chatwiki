import{_ as J}from"./cu-scroll-BvD9XPVC.js";import{s as V,g as j,a as A,b as D,d as E}from"./index-CwlGBMSn.js";import{e as u,M as d,N as a,k as r,S as i,W as o,a7 as O,Y as y,F as M,a0 as U,$ as F,Z as b,a1 as P,a2 as Q,a4 as q,B as Y,u as Z,Q as L}from"./vue-chunks-Dagx-vSq.js";import{b as R,M as T,k as N,B as G,E as H}from"../../index-BdYv4pbp.js";import"./index-TeHk_coF.js";import{_ as K,R as X}from"./RadioButton-CKy5Sstn.js";import{C as tt}from"./index-Dzb8yElx.js";import{_ as et}from"./TextArea-DRJIYohD.js";import{P as ot}from"./PlusOutlined-BEhntgqt.js";import{a as st}from"./index-p8d_9U1-.js";import{_ as at}from"./index-CCsePsqL.js";import{_ as nt}from"./index-DdBHG-A3.js";import{_ as it}from"./index-B6ctIxYh.js";import"./pull-up.esm-D94Swpvl.js";import"./observe-dom.esm-CyCedSm-.js";import"./axios-BZ84_VUH.js";import"./qs-CSiAN3u4.js";import"./crypto-js-DN0vhd75.js";import"./dayjs-CZ5VaChI.js";import"./FormItemContext-Cdyd-mYe.js";import"./Checkbox-B2wqz-LK.js";import"./index-_xQpb7Ga.js";import"./index-ffqjZvit.js";import"./index-p3MxSJUT.js";import"./ResizeObserver.es-B1PUzC5B.js";import"./inputProps-BIa77Hqy.js";import"./index-DNsujCXu.js";import"./useMaxLevel-B54cygJO.js";import"./index-BddIR2yb.js";import"./Trigger-DWEODdVI.js";import"./slide-4EGAbcnD.js";import"./CheckOutlined-Zj7x0G_2.js";import"./DownOutlined-bF62ZcFO.js";import"./SearchOutlined-C-SKizIr.js";import"./move-Du4Gi3iM.js";import"./collapseMotion-D5mGic4t.js";import"./CaretDownFilled-7_Xowb8a.js";import"./responsiveObserve-YIOA4WXQ.js";import"./css-DbBMd65r.js";import"./fromPairs-Dx9PT-t0.js";import"./index-BITuwxer.js";import"./LeftOutlined-DfhC6gKx.js";import"./RightOutlined-Dc3RESo2.js";import"./index-Dq7HAFaD.js";import"./dropdown-BiE8xfl_.js";import"./colors-CJx9DhIW.js";import"./index-CJ0orYu6.js";import"./shallowequal-CI97GdPH.js";import"./CaretDownOutlined-Ch0ng0P7.js";import"./index-B11WLJj_.js";import"./Input-C2qOGQ_1.js";import"./Search-B65y9BZx.js";import"./isPlainObject-BUQ58MPT.js";import"./Password-D2_IM1Jy.js";const W=x=>(P("data-v-24f596c8"),x=x(),Q(),x),lt={class:"form-modal-box"},rt={class:"form-item"},dt=W(()=>o("div",{class:"form-label"},[y("敏感词"),o("span",null,"(一行一个，最多1000个敏感词)")],-1)),_t={class:"form-content"},ct={class:"form-item"},pt=W(()=>o("div",{class:"form-label"},"生效机器人",-1)),ut={class:"form-content"},mt={key:0,class:"robot-list"},vt={class:"robot-name-text"},ht={__name:"add-sensitive-modal",props:{robotList:{type:Array,default:()=>[]}},emits:["ok"],setup(x,{expose:I,emit:c}){const z=c,h=x,w=u(!1),B=u("添加敏感词"),S=u(""),m=u(""),p=u(0),_=u([]),t=e=>{w.value=!0,S.value=e.id||"",m.value=e.words||"",p.value=+e.trigger_type||0,_.value=e.robot_ids||[]},v=e=>{_.value.includes(e.id)?_.value=_.value.filter(l=>l!==e.id):_.value.push(e.id)},f=()=>{if(!m.value)return N.error("请输入敏感词");if(p.value==1&&_.value.length==0)return N.error("请选择机器人");V({id:S.value,words:m.value,trigger_type:p.value,robot_ids:_.value.join(",")}).then(e=>{N.success(S.value?"修改成功":"添加成功"),w.value=!1,z("ok")})};return I({show:t}),(e,l)=>{const $=et,C=X,k=K,g=tt,s=T;return a(),d("div",null,[r(s,{open:w.value,"onUpdate:open":l[2]||(l[2]=n=>w.value=n),title:B.value,onOk:f,width:620},{default:i(()=>[o("div",lt,[o("div",rt,[dt,o("div",_t,[r($,{value:m.value,"onUpdate:value":l[0]||(l[0]=n=>m.value=n),placeholder:"请输入敏感词",style:{height:"160px"}},null,8,["value"])])]),o("div",ct,[pt,o("div",ut,[r(k,{value:p.value,"onUpdate:value":l[1]||(l[1]=n=>p.value=n)},{default:i(()=>[r(C,{value:0},{default:i(()=>[y("所有机器人")]),_:1}),r(C,{value:1},{default:i(()=>[y("指定机器人")]),_:1})]),_:1},8,["value"]),p.value==1?(a(),d("div",mt,[(a(!0),d(M,null,U(h.robotList,n=>(a(),d("div",{class:"checked-item",key:n.id},[r(g,{onClick:F(Nt=>v(n),["stop"]),checked:_.value.includes(n.id)},{default:i(()=>[o("div",vt,b(n.robot_name),1)]),_:2},1032,["onClick","checked"])]))),128))])):O("",!0)])])])]),_:1},8,["open","title"])])}}},ft=R(ht,[["__scopeId","data-v-24f596c8"]]),kt={class:"user-model-page"},gt={class:"page-title"},bt={class:"add-block"},yt={class:"list-wrapper"},xt={class:"content-box"},wt={class:"text-over-box"},St={key:1,class:"text-over-box"},Ct={key:0},$t={class:"text-over-box"},Ot={key:1,class:"text-over-box"},It=["onClick"],Lt=["onClick"],Mt={__name:"index",setup(x){q().query;const I=u([]),c=Y({page:1,size:20,total:0}),z=t=>{c.page=t.current,c.size=t.pageSize,h()},h=()=>{A({...c}).then(t=>{let v=t.data.list||[];I.value=v.map(f=>{let e=JSON.parse(f.robot_data),l=e.map(k=>k.robot_name).join(";"),$=e.map(k=>k.id),C=f.words.split(`
`).join("；");return{...f,robot_data:e,robot_name_desc:l,robot_ids:$,words_desc:C}}),c.total=t.data.total})};h();const w=t=>{D({id:t.id}).then(v=>{h()})},B=t=>{T.confirm({title:"删除确认",icon:r(H),content:`确定要删除敏感词[${t.words_desc}]吗？`,okText:"删除",okType:"danger",cancelText:"取消",onOk(){E({id:t.id}).then(v=>{N.success("删除成功"),h()})},onCancel(){}})},S=u(null),m=(t={})=>{S.value.show(JSON.parse(JSON.stringify(t)))},p=u([]);j().then(t=>{p.value=t.data||[]});const _=[{title:"敏感词",dataIndex:"words_desc",key:"words_desc",ellipsis:!0,width:300},{title:"生效机器人",dataIndex:"robot_name_desc",key:"robot_name_desc",ellipsis:!0,width:300},{title:"是否启用",key:"status",dataIndex:"status",width:150},{title:"操作",key:"action",width:120}];return(t,v)=>{const f=G,e=at,l=nt,$=it,C=st,k=J;return a(),d("div",kt,[o("div",gt,[y(" 敏感词管理 "),o("div",bt,[r(f,{type:"primary",onClick:v[0]||(v[0]=g=>m()),icon:r(Z(ot))},{default:i(()=>[y("添加敏感词")]),_:1},8,["icon"])])]),o("div",yt,[r(k,null,{default:i(()=>[o("div",xt,[r(C,{columns:_,"data-source":I.value,pagination:{current:c.page,total:c.total,pageSize:c.size,showQuickJumper:!0,showSizeChanger:!0,pageSizeOptions:["10","20","50","100"]},onChange:z},{bodyCell:i(({column:g,record:s})=>[g.key==="words_desc"?(a(),d(M,{key:0},[s.words_desc.length>20?(a(),L(e,{key:0,overlayStyle:{"max-width":"500px"}},{title:i(()=>[y(b(s.words_desc),1)]),default:i(()=>[o("div",wt,b(s.words_desc),1)]),_:2},1024)):(a(),d("div",St,b(s.words_desc),1))],64)):O("",!0),g.key==="robot_name_desc"?(a(),d(M,{key:1},[s.trigger_type==0?(a(),d("div",Ct,"所有机器人")):(a(),d(M,{key:1},[s.robot_name_desc.length>20?(a(),L(e,{key:0,overlayStyle:{"max-width":"500px"}},{title:i(()=>[y(b(s.robot_name_desc),1)]),default:i(()=>[o("div",$t,b(s.robot_name_desc),1)]),_:2},1024)):(a(),d("div",Ot,b(s.robot_name_desc),1))],64))],64)):O("",!0),g.key==="status"?(a(),L(l,{key:2,onChange:n=>w(s),checked:s.status==1,"checked-children":"开","un-checked-children":"关"},null,8,["onChange","checked"])):O("",!0),g.key==="action"?(a(),L($,{key:3,gap:12,style:{"white-space":"nowrap"}},{default:i(()=>[o("a",{onClick:n=>m(s)},"编辑",8,It),o("a",{onClick:n=>B(s)},"删除",8,Lt)]),_:2},1024)):O("",!0)]),_:1},8,["data-source","pagination"])])]),_:1}),r(ft,{onOk:h,robotList:p.value,ref_key:"addaddSensitiveModalRef",ref:S},null,8,["robotList"])])])}}},ze=R(Mt,[["__scopeId","data-v-f3afdccf"]]);export{ze as default};
